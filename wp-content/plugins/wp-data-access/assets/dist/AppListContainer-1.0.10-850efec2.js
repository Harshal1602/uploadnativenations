import{l as n,j as e,s as Xe,a as Ue,g as Me,A as y,b as es,r as g,e as c,C as v,c as ss,d as ts,f as rs,h as as,i as ns,k as is,m as os,n as ps,o as ls,p as cs,R as Q,q as se,t as ds,u as us,P as xs,v as Te,w as Ne,x as hs,y as oe,z as ye,B as Ie,D as Ce,E as ve,F as gs,G as ms,H as fs,I as js,J as Se,K as De,L as bs,M as As,N as Ts,O as ys,Q as Cs,S as vs,T as Ss,U as de,V as Ds}from"./main-1.0.10.js";import{A as K,a as Rs}from"./AdminTheme-1.0.10-77503373.js";import{B as o,u as O,M as te,a as ks,b as H,c as ae,T as B,d as Ms,A as we,e as Ee,f as Le,g as pe,h as Ns,i as Is,j as ws,k as Es,l as Ls,S as Ps,m as zs,n as Os,o as Pe,D as q,v as _s,p as Fs,q as Bs,r as Gs}from"./main-1.0.10-f52b9bd1.js";import{T as ue,C as X,s as Ws,S as ne,R as qs,a as xe,B as Hs,b as Ys,c as Js,d as $s,e as he}from"./settings-1.0.10-7d354621.js";import{C as ze,a as Oe,b as _e,u as ce}from"./useApp-1.0.10-ec4ceb53.js";import{A as I,a as w,b as re,L as $}from"./Link-1.0.10-0c622c62.js";import{T as Z,F as G,I as Fe,S as Be,a as J,A as le,b as me}from"./TextField-1.0.10-1c88e8ee.js";import{M as Ge}from"./MenuItem-1.0.10-7183fe69.js";import{B as V,C as fe,a as je}from"./CardContent-1.0.10-fdbae602.js";import{P as Vs}from"./PremiumFeature-1.0.10-d8bec116.js";import{F as ie}from"./FormControlLabel-1.0.10-8c056e28.js";import{a as Zs,b as Ks,c as Qs,d as Xs,e as Us,f as et,g as st,h as tt,i as rt}from"./ActionsApp-1.0.10-3d5dae5f.js";import{R as at}from"./RadioGroup-1.0.10-ba763186.js";import{R as Re}from"./Radio-1.0.10-5d5f37f5.js";import{l as nt,C as it}from"./index-1.0.10-770ebdb9.js";import{I as Y,T as ke,P as We}from"./iconBase-1.0.10-ed1594d9.js";import{T as ge}from"./Tabs-1.0.10-904035cb.js";import{B as ee}from"./index.esm-1.0.10-b71290a7.js";import{F as ot}from"./FileSaver.min-1.0.10-b9a9d902.js";import{c as pt}from"./index-1.0.10-ab8af271.js";import{S as lt,a as ct,b as dt}from"./Stepper-1.0.10-17f5c392.js";import{A as ut}from"./AppMetaData-1.0.10-6432bb39.js";import{I as xt}from"./InputAdornment-1.0.10-5eb89e09.js";import{C as ht}from"./Checkbox-1.0.10-8b17dcc2.js";import"./Close-1.0.10-2cc4e9e5.js";import"./Menu-1.0.10-18fe74ce.js";import"./DialogContent-1.0.10-806b7ca9.js";import"./ActionsExplorer-1.0.10-9ae320fe.js";import"./useSlot-1.0.10-af1d07b4.js";import"./index.esm-1.0.10-fc952eac.js";import"./Alert-1.0.10-a43fcfe4.js";import"./AlertTitle-1.0.10-f0717848.js";const gt=({app:s,setIsUpdated:a})=>(n.debug(s),e.jsxs(o,{children:[e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx(ze,{setIsUpdated:a})})}),e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx(Oe,{setIsUpdated:a})})}),e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx(_e,{app:s,setIsUpdated:a})})})]})),qe=({app:s,hasErrors:a,setIsUpdated:t})=>{n.debug(s,a);const l=O();return e.jsx(Z,{type:"text",label:"App Name",error:a,fullWidth:!0,required:!0,helperText:"App name must be unique.",value:s.appName,autoFocus:!0,autoComplete:"off",onChange:u=>{l(Xe({appName:u.target.value})),t&&t(!0)}})},He=({app:s,hasErrors:a,setIsUpdated:t})=>{n.debug(s,a);const l=O();return e.jsx(Z,{type:"text",label:"App Title",error:a,fullWidth:!0,required:!0,helperText:"App title describes the purpose of the app.",value:s.appTitle,autoComplete:"off",onChange:u=>{l(Ue({appTitle:u.target.value})),t&&t(!0)}})},Ye=({app:s,isNew:a,setIsUpdated:t})=>{n.debug(s);const l=O(),u=Me(),i=a?"Select App Type *":"App Type *";return e.jsxs(G,{children:[e.jsx(Fe,{variant:"outlined",children:i}),e.jsxs(Be,{MenuProps:{id:"pp-select-menu"},label:i,value:s.appType,disabled:a!==!0&&s.appType==y.APPCONTAINER,onChange:p=>{l(es({appType:p.target.value})),t&&t(!0)},children:[...u.map(p=>{let d=p.id===y.DATATABLE||p.id===y.DATAENTRY||p.id===y.APPCONTAINER;return a!==!0&&p.id===y.APPCONTAINER&&(d=!1),e.jsx(Ge,{value:p.id,disabled:!d,children:p.text})})]}),e.jsxs(J,{children:["Select ",e.jsx("strong",{children:"Data Table"})," to create a read-only app, or ",e.jsx("strong",{children:"Data Administration"})," to enable transactions. To create an app that contains one or more other apps, select ",e.jsx("strong",{children:"App"}),"."]})]})},mt=({app:s})=>{n.debug(s);const[a,t]=g.useState(!1),[l,u]=g.useState(void 0),i=()=>{switch(l){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return e.jsxs(e.Fragment,{children:[e.jsxs(I,{disableGutters:!0,children:[e.jsx(w,{expandIcon:e.jsx(te,{}),children:"Reset"}),e.jsx(re,{children:e.jsxs(G,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(V,{variant:"contained",color:"primary",onClick:()=>{u(ue.TABLE),t(!0)},children:"Reset Table Builder"}),e.jsx(V,{variant:"contained",color:"primary",onClick:()=>{u(ue.FORM),t(!0)},children:"Reset Form Builder"}),e.jsx(V,{variant:"contained",color:"primary",onClick:()=>{u(ue.THEME),t(!0)},children:"Reset Theme"}),e.jsxs(J,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},error:!0,children:[e.jsx(ks,{}),"A reset cannot be undone!"]})]})})]}),e.jsx(X,{title:i(),message:"Are you sure? This action cannot be undone!",open:a,setOpen:t,onConfirm:()=>{l!==void 0&&Ws(s.appDbId,s.appCntId,l,null,null,p=>{if(p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":c(p.message,{variant:"success"});break;case"info":c(p.message,{variant:"info"});break;default:c(p.message??v.contactSupport,{variant:"error"})}else n.error(p),c(v.contactSupport,{variant:"error"})},p=>{n.error("error",p),c(p??v.contactSupport,{variant:"error"})})}})]})},Je=()=>{const s=H(a=>ss(a));return n.debug("appMetaData",s),s},ft=()=>{const s=H(a=>ts());return n.debug("appLanguage",s),s},$e=({app:s,setIsUpdated:a})=>{n.debug(s);const t=O();Je();const l=ft(),u=H(d=>rs(d));n.debug("updateSiteLanguage",u),g.useEffect(()=>{const d={appLanguage:as.code};t(ns(d))},[]);const[i,p]=g.useState(!1);return e.jsxs(o,{sx:{width:"100%"},children:[e.jsxs(G,{fullWidth:!0,disabled:!0,children:[e.jsx(Fe,{variant:"outlined",children:"App Language"}),e.jsxs(Be,{MenuProps:{id:"pp-select-menu"},label:"App Language",value:l,onChange:d=>{},children:[...is.map(d=>e.jsx(Ge,{value:d.code,children:d.language},d.code))]}),e.jsx(J,{children:"Selected app language is applied to all (master and detail) tables and forms."})]}),!1,e.jsx(G,{children:e.jsxs(J,{component:"div",sx:{marginLeft:0},children:[e.jsx(o,{sx:{marginTop:"20px"},children:e.jsxs($,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>p(!i),children:[e.jsx(ae,{}),"Which app information is localized?"]})}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Information provided in the selected app language:"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Tooltips"}),e.jsx("li",{children:"Field labels"}),e.jsx("li",{children:"Field hints"}),e.jsx("li",{children:"Info and success messages"}),e.jsx("li",{children:"Most error messages"})]})]}),e.jsxs(o,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Information not provided in the selected language:"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Builders, Wizards and Managers are provided in English"}),e.jsx("li",{children:"Database and server errors are not translated"})]})]}),e.jsx(o,{sx:{marginTop:"20px"},children:"If you discover any translation errors, please let us know. We are committed to improving our translations."})]})]})}),e.jsx(Vs,{})]})},jt=()=>{const s=H(a=>os(a));return n.debug("appFullscreen",s),s},bt=({app:s,setIsUpdated:a})=>{n.debug(s);const t=O(),l=jt();return e.jsxs(e.Fragment,{children:[e.jsx(ie,{control:e.jsx(ne,{checked:l,onChange:(u,i)=>{t(ps({fullScreen:i})),a&&a(!0),u.stopPropagation()}}),label:"Enable full screen support",labelPlacement:"end"}),e.jsx(G,{fullWidth:!0,children:e.jsx(J,{children:"Adds an icon to the app toolbar, allowing the user to switch to full-screen mode."})})]})},At=({app:s,setIsUpdated:a})=>(n.debug(s),e.jsxs(o,{children:[e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx(qe,{app:s,hasErrors:!1,setIsUpdated:a})})}),e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx(He,{app:s,hasErrors:!1,setIsUpdated:a})})}),e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx(Ye,{app:s,setIsUpdated:a})})}),e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx($e,{app:s,setIsUpdated:a})})}),e.jsxs(I,{disableGutters:!0,children:[e.jsx(w,{expandIcon:e.jsx(te,{}),children:"Settings"}),e.jsx(re,{children:e.jsx(bt,{app:s,setIsUpdated:a})})]}),e.jsx(mt,{app:s})]})),Ve=()=>{const s=H(a=>ls(a));return n.debug("apps",s),s},Ze=({app:s,setIsUpdated:a})=>{const t=O(),[l,u]=g.useState(!1),i=Ve(),p=i.filter(f=>s.appDbId!==f.appId&&f.appType!=y.APPCONTAINER),d=[];s.appApps.map(f=>{const h=i.filter(A=>A.appId===f);h.length===1&&d.push(h[0])});const b=f=>f.appName+(l?" ("+f.appTitle+")":"");return e.jsxs(G,{sx:{width:"100%",marginTop:"8px"},children:[e.jsx(le,{multiple:!0,options:p,value:d,disableCloseOnSelect:!0,getOptionLabel:f=>b(f),onChange:(f,h)=>{t(cs({appApps:h.map(A=>A.appId)})),a&&a(!0),f.stopPropagation()},renderInput:f=>e.jsx(Z,{...f,label:"Apps"})}),e.jsxs(J,{component:"div",sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Apps will be added in the order they are entered here."}),e.jsx(ie,{sx:{"& span.MuiFormControlLabel-label":{fontSize:"0.75rem"}},control:e.jsx(ne,{checked:l,onChange:f=>{u(!l),f.stopPropagation()}}),label:"Show title",labelPlacement:"end"})]})]})},Tt=({app:s,setIsUpdated:a})=>e.jsx(I,{disableGutters:!0,children:e.jsx(w,{children:e.jsx(Ze,{app:s,setIsUpdated:a})})}),Ke=({setIsUpdated:s})=>{const a=O(),t=ce(),l=Je(),u=g.useMemo(()=>{const h=[];if((l==null?void 0:l.roles)!==void 0)for(const A in l.roles)h.push({key:A,value:l.roles[A]});return h},[l.roles]);n.debug(u);const i=g.useMemo(()=>{const h=[];if((l==null?void 0:l.users)!==void 0)for(const A in l.users)h.push({key:A,value:l.users[A]});return h},[l.users]);n.debug(i);const p=g.useMemo(()=>u.filter(h=>t.appRestApi.authorized_roles.includes(h.key)),[t.appRestApi.authorized_roles,u]),d=g.useMemo(()=>i.filter(h=>t.appRestApi.authorized_users.includes(h.key)),[t.appRestApi.authorized_users,i]),[b,f]=g.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{className:"pp-fieldset",style:{padding:"20px"},children:[e.jsx("legend",{children:"Authorization"}),e.jsx(G,{sx:{width:"100%"},children:e.jsxs(at,{children:[e.jsxs(me,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(Re,{checked:t.appRestApi.authorization===Q.AUTHORIZED,onChange:h=>{a(se({restApiActions:{...t.appRestApi,authorization:Q.AUTHORIZED}})),s&&s(!0),h.stopPropagation()}}),"Authorized access only"]}),e.jsxs(o,{sx:{display:"grid",gridGap:"10px",margin:"20px 20px 15px 42px"},children:[e.jsx(le,{multiple:!0,options:u,disableCloseOnSelect:!0,getOptionLabel:h=>h.value,value:p,onChange:(h,A)=>{a(se({restApiActions:{...t.appRestApi,authorized_roles:A.map(k=>k.key)}})),s&&s(!0),h.stopPropagation()},renderInput:h=>e.jsx(Z,{...h,label:"Roles"})}),e.jsx(le,{multiple:!0,options:i,disableCloseOnSelect:!0,getOptionLabel:h=>h.value,value:d,onChange:(h,A)=>{a(se({restApiActions:{...t.appRestApi,authorized_users:A.map(k=>k.key)}})),s&&s(!0),h.stopPropagation()},renderInput:h=>e.jsx(Z,{...h,label:"Users"})})]}),e.jsxs(me,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(Re,{checked:t.appRestApi.authorization===Q.ANONYMOUS,onChange:h=>{a(se({restApiActions:{...t.appRestApi,authorization:Q.ANONYMOUS}})),s&&s(!0),h.stopPropagation()}}),"Anonymous access"]})]})})]}),e.jsx(G,{children:e.jsxs(J,{component:"div",sx:{marginLeft:0},children:[e.jsx(o,{sx:{marginTop:"25px"},children:e.jsxs($,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>f(!b),children:[e.jsx(ae,{}),"What is the difference between authorized and anonymous access?"]})}),b&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Authorized access:"}),e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Users with the selected roles can access this app"}),e.jsx("li",{children:"Selected users can access this app"}),e.jsx("li",{children:"Other registered users cannot access this app"}),e.jsx("li",{children:"Anonymous users cannot access this app"})]})]}),e.jsxs(o,{sx:{marginTop:"20px"},children:[e.jsx("strong",{children:"Anonymous access:"}),e.jsx("ul",{style:{listStyle:"disc",padding:"0 40px"},children:e.jsx("li",{children:"Any user can access this app"})})]}),e.jsx(o,{sx:{marginTop:"20px"},children:"App authorization is applied to both back-end and front-end usage. Back-end access is restricted to registered users only. A Data Table app displayed on the front-end typically allows anonymous access, enabling visitors to view the table. In contrast, Data Management apps usually require authorized access to prevent unauthorized users from altering table data."})]})]})})]})},yt=({app:s,setIsUpdated:a})=>{n.debug(s);const t=O(),[l,u]=g.useState(!1);return e.jsxs(o,{sx:{display:"grid",gridGap:"30px"},children:[e.jsxs(o,{children:[e.jsx(ie,{control:e.jsx(ne,{checked:s.appAddToMenu,onChange:(i,p)=>{t(ds({appAddToMenu:p})),a&&a(!0),i.stopPropagation()}}),label:"Add App to WordPress dashboard menu",labelPlacement:"end"}),e.jsx(G,{children:e.jsxs(J,{component:"div",children:[e.jsx(o,{children:e.jsxs($,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>u(!l),children:[e.jsx(ae,{}),"What is a WordPress dashboard menu?"]})}),l&&e.jsx(o,{sx:{marginTop:"20px"},children:"The WordPress dashboard provides a navigation menu with options to navigate to built-in or custom pages. Enabling this option adds a menu item to the WordPress dashboard for all authorized users, allowing easy access to this app."})]})})]}),s.appAddToMenu&&e.jsx(Z,{type:"text",label:"Title",fullWidth:!0,required:!0,helperText:"Title shown in WordPress dashboard menu.",value:s.appMenuTitle,autoComplete:"off",onChange:i=>{t(us({appMenuTitle:i.target.value})),a&&a(!0),i.stopPropagation()}})]})},Ct=({app:s,setIsUpdated:a})=>{n.debug(s);const t=()=>`[wpda_app app_id="${s.appDbId}"${l?' feedback="true"':""}${d?' builders="false"':""}]`,[l,u]=g.useState(!1),[i,p]=g.useState(!1),[d,b]=g.useState(!1),[f,h]=g.useState(!1),[A,k]=g.useState(t());return g.useEffect(()=>{k(t())},[l,d]),e.jsxs(o,{sx:{display:"grid",gridGap:"20px"},children:[e.jsxs(o,{children:[e.jsxs(me,{children:["App short code",e.jsx(o,{sx:{marginLeft:"5px",display:"inline-block"},children:e.jsx(nt.CopyToClipboard,{text:A,onCopy:()=>{c("Shortcode was copied to your clipboard",{variant:"info"})},children:e.jsx(B,{title:"Copy shortcode to clipboard",children:e.jsx(Y,{children:e.jsx(Ms,{})})})})})]}),e.jsx(o,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center","& pre":{backgroundColor:"#ccc",padding:"4px"}},children:e.jsx("pre",{children:A})})]}),e.jsx(o,{children:e.jsxs(G,{children:[e.jsx(ie,{control:e.jsx(ne,{checked:l,onChange:(M,E)=>{u(E),a&&a(!0),M.stopPropagation()}}),label:"Feedback",labelPlacement:"end"}),e.jsxs(J,{component:"div",children:[e.jsxs($,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>{p(!i)},children:[e.jsx(ae,{}),"Show authorization and usage errors"]}),i&&e.jsx(o,{sx:{marginTop:"20px"},children:"Authorization and usage errors are hidden by default to prevent errors from appearing on front-end pages for unauthorized users. If you want to display authorization and usage errors, enable feedback."})]})]})}),e.jsx(o,{children:e.jsxs(G,{children:[e.jsx(ie,{control:e.jsx(ne,{checked:d,onChange:(M,E)=>{b(E),a&&a(!0),M.stopPropagation()}}),label:"Disable builders on front-end",labelPlacement:"end"}),e.jsxs(J,{component:"div",children:[e.jsxs($,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>{h(!f)},children:[e.jsx(ae,{}),"Disables builder access for administrators"]}),f&&e.jsx(o,{sx:{marginTop:"20px"},children:"Builder access is automatically enabled on front-end pages for administrators, allowing them to change app settings directly. Disabling builder access will remove all Table Builder and Form Builder icons from these pages. Please note that anonymous users and non-admin users cannot see these builder icons and have no access to app settings."})]})]})})]})},vt=({app:s,setIsUpdated:a})=>(n.debug(s),e.jsxs(o,{children:[e.jsxs(I,{disableGutters:!0,children:[e.jsx(w,{expandIcon:e.jsx(te,{}),children:"Authorize Roles & Users"}),e.jsx(re,{children:e.jsx(Ke,{setIsUpdated:a})})]}),e.jsxs(I,{disableGutters:!0,children:[e.jsx(w,{expandIcon:e.jsx(te,{}),children:"Back-end Access"}),e.jsx(re,{children:e.jsx(yt,{app:s,setIsUpdated:a})})]}),e.jsxs(I,{disableGutters:!0,children:[e.jsx(w,{expandIcon:e.jsx(te,{}),children:"Front-end Access"}),e.jsx(re,{children:e.jsx(Ct,{app:s})})]})]})),St=({appDbId:s})=>{var W,N;n.debug(s);const a=O(),t=ce(),l=((W=K)==null?void 0:W.palette.mode)===xs.LIGHT?(N=K)==null?void 0:N.palette.primary.main:"",[u,i]=g.useState(!1);n.debug(u);const[p,d]=g.useState(!1);n.debug(p);const b=()=>{a(Ne({}))},f=()=>{u?d(!0):b()},h=()=>{if(!t.appName)return c("App name is required",{variant:"error"}),!1;if(!t.appTitle)return c("App title is required",{variant:"error"}),!1;if(t.appType==y.APPCONTAINER)t.appApps.length===0&&c("No apps added",{variant:"info"});else{if(!t.appDatabase)return c("Database is required",{variant:"error"}),!1;if(!t.appTable)return c("Table is required",{variant:"error"}),!1;if(t.appColumns.filter(m=>m.isSelected).length===0)return c("At least one column must be selected",{variant:"error"}),!1}return!0},A=()=>{h()&&Zs(t,m=>{if(n.debug(m),m!=null&&m.code&&(m==null?void 0:m.message)!==void 0)switch(m.code){case"ok":c(m.message,{variant:"success"}),a(oe({}));break;case"info":c(m.message,{variant:"info"});break;default:n.error(m),c(m.message??v.contactSupport,{variant:"error"})}else n.error(m),c(v.contactSupport,{variant:"error"})},m=>{n.error("error",m),c(m??v.contactSupport,{variant:"error"})})},k=()=>{h()&&(A(),b())},M=m=>{a(hs({anchor:m}))},[E,j]=g.useState("1"),C=(m,_)=>{j(_)};return e.jsxs(e.Fragment,{children:[e.jsxs(qs,{closeDrawer:f,children:[e.jsx(we,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(Ee,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(ke,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Manage App"}),e.jsx(ke,{sx:{fontSize:"10px",display:{xs:"none",sm:"block"},paddingLeft:"10px"},children:t.appName})]}),e.jsx(xe,{title:"Dock to left",position:"bottom",children:e.jsx(Y,{onClick:()=>{M(Te.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Hs,{})})}),e.jsx(xe,{title:"Dock to right",position:"bottom",children:e.jsx(Y,{onClick:()=>{M(Te.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Ys,{})})}),e.jsx(xe,{title:"Close",position:"bottom",children:e.jsx(Y,{onClick:f,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(Le,{})})})]})}),e.jsx(fe,{className:"pp-settings-container",children:e.jsx(je,{sx:{padding:0,margin:0},children:e.jsxs(Js,{value:E,children:[e.jsxs($s,{variant:"fullWidth",textColor:"primary",onChange:C,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(ge,{label:"App Info",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(ge,{label:t.appType==y.APPCONTAINER?"Apps":"Data Source",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(ge,{label:"Access",value:"3",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(o,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(he,{value:"1",children:e.jsx(At,{app:t,setIsUpdated:i})}),e.jsx(he,{value:"2",children:t.appType==y.APPCONTAINER?e.jsx(Tt,{app:t,setIsUpdated:i}):e.jsx(gt,{app:t,setIsUpdated:i})}),e.jsx(he,{value:"3",children:e.jsx(vt,{app:t,setIsUpdated:i})})]})]})})}),e.jsx(fe,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:l},children:e.jsxs(je,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(V,{variant:"outlined",className:"footer_action_button_apply",onClick:A,children:"Apply"}),e.jsx(V,{variant:"outlined",className:"footer_action_button",onClick:k,children:"OK"}),e.jsx(V,{variant:"outlined",className:"footer_action_button",onClick:f,children:"Cancel"})]})})]}),e.jsx(X,{title:"Close App Manager?",message:"All uncommitted changes will be lost!",open:p,setOpen:d,onConfirm:()=>{b()},onKeep:()=>{b()}})]})},Dt=({app:s})=>{var C,W,N,m,_;n.debug(s);const a=O(),[t,l]=g.useState(!1),[u,i]=g.useState(!1),[p,d]=g.useState(!1),b=r=>{let L={};try{L=JSON.parse(r.app_settings)}catch(D){L.rest_api={authorization:Q.AUTHORIZED,authorized_roles:[],authorized_users:[]},n.error("Invalid JSON - app settings"),n.error(D),c("Invalid JSON, check console",{variant:"error"})}return L},f=r=>{Ks(r,L=>{var x,T,P,F,be,Ae;const D=L==null?void 0:L.data;if(n.debug("response data",D),D.app&&D.app.app&&Array.isArray(D.app.app)&&D.app.container&&Array.isArray(D.app.container)&&D.app.apps&&Array.isArray(D.app.apps)){const R=D.app.app[0];if(n.debug(R),R.app_type===y.APPCONTAINER.toString()){const S=b(R),U=D.app.apps;n.debug(U),a(Ce({appDbId:r,appId:ve(r),appName:R.app_name,appTitle:R.app_title,appType:R.app_type,appCntId:0,appCntSeqNr:0,appDatabase:null,appTable:null,appColumns:[],appRelationTable:null,appRelationColumns:[],appRestApi:S==null?void 0:S.rest_api,appAddToMenu:R.app_add_to_menu!=="0",appMenuTitle:((x=S==null?void 0:S.settings)==null?void 0:x.app_menu_title)??R.app_title,appMetaData:D,appLanguage:(T=S==null?void 0:S.settings)==null?void 0:T.app_language,fullScreen:((P=S==null?void 0:S.settings)==null?void 0:P.app_fullscreen)??!0,appApps:U}))}else{const S=D.app.container[0];n.debug(S);let U=[];try{U=JSON.parse(S.cnt_cls)}catch(Qe){n.error("Invalid JSON - app columns"),n.error(Qe),c("Invalid JSON, check console",{variant:"error"})}const z=b(R);a(Ce({appDbId:r,appId:ve(r),appName:R.app_name,appTitle:R.app_title,appType:R.app_type,appCntId:S.cnt_id,appCntSeqNr:S.cnt_seq_nr,appDatabase:S.cnt_dbs,appTable:S.cnt_tbl,appColumns:U,appRelationTable:null,appRelationColumns:[],appRestApi:z==null?void 0:z.rest_api,appAddToMenu:R.app_add_to_menu!=="0",appMenuTitle:((F=z==null?void 0:z.settings)==null?void 0:F.app_menu_title)??R.app_title,appMetaData:D,appLanguage:(be=z==null?void 0:z.settings)==null?void 0:be.app_language,fullScreen:((Ae=z==null?void 0:z.settings)==null?void 0:Ae.app_fullscreen)??!0}))}}else c(v.contactSupport,{variant:"error"})},L=>{n.error("error",L),c(L??v.contactSupport,{variant:"error"})})},h=()=>{switch(s.appType){case y.DATAENTRY:return e.jsx(ee,{});case y.MASTERDETAIL:return e.jsx(ee,{});case y.REGISTRATION:return e.jsx(ee,{});case y.UPDATEFORM:return e.jsx(ee,{});default:return e.jsx(ee,{})}},A=()=>{Qs(s.appId,r=>{if(n.debug(r),r!=null&&r.code&&(r==null?void 0:r.message)!==void 0)switch(r.code){case"ok":c(r.message,{variant:"success"}),a(oe({}));break;case"info":c(r.message,{variant:"info"});break;default:n.error(r),c(r.message??v.contactSupport,{variant:"error"})}else n.error(r),c(v.contactSupport,{variant:"error"});i(!1)},r=>{n.error("error",r),c(r??v.contactSupport,{variant:"error"}),i(!1)})},k=()=>{Xs(s.appId,r=>{n.debug(r),r!=null&&r.code&&(r==null?void 0:r.message)!==void 0?r.data.data?ot(new Blob([r.data.data],{type:"text/json;charset=utf-8"}),"wpda-export-"+s.appName+".sql"):(n.error(r),c(r.message??v.contactSupport,{variant:"error"})):(n.error(r),c(v.contactSupport,{variant:"error"})),i(!1)},r=>{n.error("error",r),c(r??v.contactSupport,{variant:"error"}),i(!1)})},M=()=>{Us(s.appId,r=>{if(n.debug(r),r!=null&&r.code&&(r==null?void 0:r.message)!==void 0)switch(r.code){case"ok":c(r.message,{variant:"success"}),a(oe({}));break;case"info":c(r.message,{variant:"info"});break;default:n.error(r),c(r.message??v.contactSupport,{variant:"error"})}else n.error(r),c(v.contactSupport,{variant:"error"});l(!1)},r=>{n.error("error",r),c(r??v.contactSupport,{variant:"error"}),l(!1)})},E=pe("(max-width:700px)"),j=pe("(max-width:900px)");return e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",padding:"24px",...j&&{".pp-row-actions":{width:0}},"&:hover":{".pp-row-title":{display:j?"inline-block":"none"},".pp-row-actions":{visibility:j?"hidden":"visible"}}},children:[e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"center"},children:[e.jsxs(o,{sx:{width:"100%",display:"grid",gridTemplateColumns:"auto 1fr",gridGap:"10px",justifyContent:"center",alignItems:"center"},children:[e.jsx(o,{children:h()}),e.jsxs(o,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:[s.appName,e.jsxs(o,{className:"pp-row-title",sx:{display:"inline-block",marginLeft:"5px",fontSize:"80%"},children:["−",e.jsx(o,{sx:{display:"inline-block",width:"5px"}}),s.appTitle]})]})]}),e.jsxs(o,{sx:{display:"grid",visibility:"hidden",gridTemplateColumns:"auto auto auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center"},className:"pp-row-actions",children:[e.jsx(o,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(B,{title:"Manage App",children:e.jsx($,{sx:{cursor:"pointer"},underline:"none",onClick:r=>{f(s.appId),r.preventDefault(),r.stopPropagation()},children:"Manage"})}),e.jsx(o,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(B,{title:"Run & Build App",children:e.jsx($,{sx:{cursor:"pointer"},underline:"none",onClick:r=>{a(ye({isActive:!0,appDbId:s.appId})),r.preventDefault(),r.stopPropagation()},children:"Run & Build"})}),e.jsx(o,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(B,{title:"Delete App",children:e.jsx($,{sx:{cursor:"pointer"},underline:"none",onClick:r=>{l(!0),r.preventDefault(),r.stopPropagation()},children:"Delete"})})]})]}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto auto auto",justifyContent:E?"end":"space-evenly",alignItems:"center"},children:[e.jsx(o,{sx:{paddingRight:"10px"},children:E?"":Ie(s.appType)}),e.jsx(B,{title:"Manage App",children:e.jsx(Y,{sx:{color:(C=K)==null?void 0:C.palette.primary.main},onClick:r=>{f(s.appId),r.preventDefault(),r.stopPropagation()},children:e.jsx(Ns,{})})}),e.jsx(B,{title:"Run & Build App",children:e.jsx(Y,{sx:{color:(W=K)==null?void 0:W.palette.primary.main},onClick:r=>{a(ye({isActive:!0,appDbId:s.appId})),r.preventDefault(),r.stopPropagation()},children:e.jsx(Is,{})})}),e.jsx(B,{title:"Copy App",children:e.jsx(Y,{sx:{color:(N=K)==null?void 0:N.palette.primary.main},onClick:r=>{i(!0),r.preventDefault(),r.stopPropagation()},children:e.jsx(ws,{})})}),e.jsx(B,{title:"Export App",children:e.jsx(Y,{sx:{color:(m=K)==null?void 0:m.palette.primary.main},onClick:r=>{d(!0),r.preventDefault(),r.stopPropagation()},children:e.jsx(Es,{})})}),e.jsx(B,{title:"Delete App",children:e.jsx(Y,{sx:{color:(_=K)==null?void 0:_.palette.error.main},onClick:r=>{l(!0),r.preventDefault(),r.stopPropagation()},children:e.jsx(Ls,{})})})]})]}),u&&e.jsx(X,{title:"Please confirm",message:"Copy this app including all containers?",open:u,setOpen:i,onConfirm:()=>A()}),p&&e.jsx(X,{title:"Please confirm",message:"Export this app including all containers?",open:p,setOpen:d,onConfirm:()=>k()}),t&&e.jsx(X,{title:"Delete App?",message:"Are you sure you want to delete app "+s.appName+"? This action cannot be undone!",open:t,setOpen:l,onConfirm:()=>M()})]})},Rt=({apps:s,search:a,types:t,isLoading:l})=>{n.debug(s,a,t);const u=p=>!(!ms(p.appName+" "+p.appTitle,a)||t.length>0&&t.filter(d=>d.id===Number(p.appType)).length===0),i=s.filter(p=>u(p)?p:null);return e.jsx(We,{elevation:4,children:e.jsxs(o,{sx:{backgroundColor:"#fff",borderBottom:"1px solid rgba(0, 0, 0, 0.34)",borderRadius:"4px","& .MuiBox-root:first-of-type":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& .MuiBox-root:hover":{backgroundColor:"rgb(242, 242, 242)"}},children:[...s.map(p=>{const d=u(p);return e.jsx(o,{className:"pp-app-details",sx:{borderTop:"1px solid rgba(0, 0, 0, 0.34)",visibility:d?"visible":"hidden",position:d?"relative":"fixed"},children:e.jsx(Dt,{app:p})})}),i.length===0&&e.jsx(o,{sx:{padding:"35px",borderTop:"1px solid rgba(0, 0, 0, 0.34)",borderRadius:"4px"},children:l?e.jsx(Ps,{title:"Loading apps...",align:gs.LEFT}):e.jsx(o,{children:"No apps found"})})]})})},kt=({setMode:s})=>{const a=O(),t=ce(),l=()=>t.appType===y.APPCONTAINER,u=l()?["App info","Apps","Authorization"]:["App info","Data source","Authorization"],[i,p]=g.useState(0);g.useEffect(()=>{let j=null;switch(t.appType){case y.DATATABLE:j=Q.ANONYMOUS;break;case y.DATAENTRY:case y.MASTERDETAIL:case y.REGISTRATION:case y.UPDATEFORM:case y.APPCONTAINER:j=Q.AUTHORIZED;break}j!==null?a(se({restApiActions:fs(j)})):c(v.contactSupport,{variant:"error"})},[t.appType]);const[d,b]=g.useState({appName:!1,appTitle:!1,appDatabase:!1,appTable:!1,appColumns:!1});n.debug(d);const f=()=>{const j=pt(js);j.table.transactions.insert=Number(t.appType)===y.DATAENTRY||Number(t.appType)===y.MASTERDETAIL||Number(t.appType)===y.REGISTRATION,j.table.transactions.update=Number(t.appType)===y.DATAENTRY||Number(t.appType)===y.MASTERDETAIL||Number(t.appType)===y.UPDATEFORM,j.table.transactions.delete=Number(t.appType)===y.DATAENTRY||Number(t.appType)===y.MASTERDETAIL,et(t,j,C=>{if(n.debug(C),C!=null&&C.code&&(C==null?void 0:C.message)!==void 0)switch(C.code){case"ok":c(C.message,{variant:"success"}),s(q.TABLE),a(oe({}));break;case"info":c(C.message,{variant:"info"});break;default:n.error(C),c(C.message??v.contactSupport,{variant:"error"})}else n.error(C),c(v.contactSupport,{variant:"error"})},C=>{n.error("error",C),c(C??v.contactSupport,{variant:"error"})}),t.updateSiteLanguage&&t.appLanguage!==void 0&&st(t.appLanguage,()=>{},()=>{})},h=()=>{var C,W;let j=!0;if(i===0){let N=!1,m=!1;t.appName.trim()===""&&(c("App name is required",{variant:"error"}),N=!0,j=!1),t.appTitle.trim()===""&&(c("App title is required",{variant:"error"}),m=!0,j=!1),b({...d,appName:N,appTitle:m})}if(i===1){let N=!1,m=!1,_=!1;l()?t.appApps.length===0&&c("No apps added",{variant:"info"}):(((C=t.appDatabase)==null?void 0:C.trim())===""&&(c("Database is required",{variant:"error"}),N=!0,j=!1),((W=t.appTable)==null?void 0:W.trim())===""&&(c("Table is required",{variant:"error"}),m=!0,j=!1),t.appColumns.filter(r=>r.isSelected===!0).length===0&&(c("No columns selected",{variant:"error"}),_=!0,j=!1)),b({...d,appDatabase:N,appTable:m,appColumns:_})}return i===u.length-1&&f(),n.debug(j),j},A=()=>e.jsxs(o,{sx:{textAlign:"right",display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[i>0?e.jsx(V,{variant:"outlined",size:"medium",sx:{width:"160px",marginRight:"10px"},onClick:()=>{p(i-1)},startIcon:e.jsx(zs,{}),children:e.jsx(o,{children:"Back"})}):e.jsx(o,{}),e.jsx(V,{variant:"contained",size:"medium",sx:{width:"160px"},onClick:()=>{h()&&i<u.length-1&&p(i+1)},startIcon:i>=u.length-1&&e.jsx(Os,{}),endIcon:i<u.length-1&&e.jsx(Pe,{}),children:e.jsx(o,{children:i<u.length-1?"Next":"Finish"})})]}),k=()=>e.jsxs(e.Fragment,{children:[e.jsx(qe,{app:t,hasErrors:d.appName}),e.jsx(He,{app:t,hasErrors:d.appName}),e.jsx($e,{app:t}),A()]}),M=()=>l()?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{app:t}),A()]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{}),e.jsx(o,{sx:{display:t.appDatabase?"block":"none"},children:e.jsx(Oe,{})}),e.jsx(o,{sx:{display:t.appTable?"block":"none"},children:e.jsx(_e,{app:t})}),A()]}),E=()=>e.jsxs(e.Fragment,{children:[e.jsx(o,{children:e.jsx(Ke,{})}),A()]});return e.jsxs(e.Fragment,{children:[e.jsx(lt,{activeStep:i,sx:{margin:"10px 0 30px 0"},children:u.map((j,C)=>(n.debug(j,C),e.jsx(ct,{children:e.jsx(dt,{children:j})},j)))}),e.jsxs("form",{onSubmit:j=>(j.preventDefault(),h()&&p(i+1),!1),style:{display:"grid",gridGap:"40px"},children:[i===0&&k(),i===1&&M(),i===2&&E(),e.jsx("input",{type:"submit",style:{display:"none"}})]})]})},Mt=({setMode:s})=>{const a=ce();n.debug(a);const[t,l]=g.useState(!1),[u,i]=g.useState(!1),p=t?`Add new ${Ie(a.appType)} app`:"Add new app";return e.jsxs(e.Fragment,{children:[e.jsxs(fe,{sx:{padding:"50px 70px 40px 70px",display:"grid",gridGap:"40px"},elevation:4,children:[e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"start"},children:[e.jsx(it,{title:"App Wizard",subheader:p,sx:{padding:0}}),e.jsx(o,{children:e.jsx(B,{title:"Close",children:e.jsx($,{sx:{cursor:"pointer"},underline:"none",onClick:d=>{i(!0),d.preventDefault(),d.stopPropagation()},children:e.jsx(o,{sx:{fontSize:"1.5rem",color:"#000"},children:e.jsx(Le,{})})})})})]}),e.jsx(je,{sx:{padding:0,display:"grid",gridGap:"30px"},children:t?e.jsx(kt,{setMode:s}):e.jsxs(o,{sx:{display:"grid",gap:"10px"},children:[e.jsx(Ye,{app:a,isNew:!0}),e.jsx(o,{sx:{textAlign:"end"},children:e.jsx(V,{variant:"contained",size:"medium",endIcon:e.jsx(Pe,{}),onClick:()=>{l(!0)},sx:{width:"160px"},children:"Start Wizard"})})]})})]}),e.jsx(X,{title:"Close App Wizard?",message:"All uncommitted changes will be lost!",open:u,setOpen:i,onConfirm:()=>{s(q.TABLE)}})]})};const pr=()=>{const s=O(),a=g.useMemo(()=>_s(),[]),[t,l]=g.useState(q.TABLE);n.debug(t),g.useEffect(()=>{const x=localStorage.getItem("ppAppsDbsSearch");x!==null&&s(Se({dbSearch:x}));const T=localStorage.getItem("ppAppsDbsSearchType");if(T!==null){const P=JSON.parse(T);s(De({dbTypes:P}))}},[]);const u=Ve(),i=H(x=>bs(x));n.debug("appDbId",i);const p=H(x=>As(x));n.debug("dbSearch",p);const d=H(x=>Ts(x));n.debug("dbTypes",d);const b=H(x=>ys(x));n.debug("designMode",b);const f=H(x=>Cs(x));n.debug("reload",f);const[h,A]=g.useState(!0);g.useEffect(()=>{M(),k()},[f]);const k=()=>{tt(function(x){const T=x==null?void 0:x.data;if(n.debug("response data",T),Array.isArray(T)){const P=[];for(let F=0;F<T.length;F++)P.push({appId:T[F].app_id,appName:T[F].app_name,appTitle:T[F].app_title,appType:T[F].app_type,appSettings:T[F].app_settings,appAddToMenu:T[F].app_add_to_menu});s(de({appList:P}))}else n.error(T),c((T==null?void 0:T.message)??v.contactSupport,{variant:"error"}),s(de({appList:[]}));A(!1)},x=>{n.error("error",x),c(x??v.contactSupport,{variant:"error"}),s(de({appList:[]})),A(!1)})},M=()=>{rt(function(x){const T=x==null?void 0:x.data;n.debug("response data",T),s(Ds({appMetaData:T}))},x=>{n.error("error",x),c(x??v.contactSupport,{variant:"error"})})};g.useEffect(()=>{t===q.TABLE&&M()},[t]),g.useEffect(()=>{vs.appPlugin&&(t===1||b.isActive===!0&&b.appDbId>0?window.document.documentElement.style.setProperty("--addAppIconVisibility","hidden"):window.document.documentElement.style.setProperty("--addAppIconVisibility","visible"),window.ppActionCreateApp=function(){t===0&&!(b.isActive===!0&&b.appDbId>0)&&l(q.FORM)})},[t,b]);const[E,j]=g.useState(250),C=pe("(max-width: 600px)"),W=pe("(max-width: 900px)");g.useEffect(()=>{_.current&&j(_.current.offsetWidth)},[d]);const N=Rs(),m=Me();n.debug(m);const _=g.useRef(),r=()=>b.isActive===!0&&b.appDbId>0,L=()=>e.jsx(B,{title:"Add new app",children:e.jsx(Y,{sx:{color:"inherit"},onClick:()=>{s(Ne({})),l(q.FORM)},children:e.jsx(Gs,{})})}),D={};return r()&&(D.visibility="hidden"),e.jsxs(Fs,{theme:N,children:[e.jsxs(o,{className:"pp-applist",sx:{width:"100%",visibility:r()?"hidden":"visible",position:r()?"fixed":"auto",height:r()?0:"auto",...r()&&{"& *":{visibility:"hidden"}},"& .pp-app-details":{...D}},children:[e.jsx(we,{position:"relative",elevation:4,sx:{margin:"0 0 5px 0"},children:e.jsxs(Ee,{className:"pp-applist-toolbar",sx:{display:"grid",gap:"12px",paddingRight:"12px !important",...C?{gap:0,paddingRight:"10px",paddingBottom:"10px",paddingLeft:"10px","& .pp-applist-search":{gridTemplateColumns:"1fr",gridGap:"2px"}}:{...W?{gap:0,paddingRight:"10px",paddingBottom:"10px",paddingLeft:"10px","& .pp-applist-search":{justifyContent:"space-between",gridTemplateColumns:"auto 1fr"}}:{justifyContent:"space-between",gridTemplateColumns:"1fr 1fr"}}},children:[e.jsxs(o,{className:"pp-applist-title",sx:{display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"10px"},children:[e.jsx(o,{sx:{fontSize:"18px",lineHeight:"18px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Apps"}),e.jsx(o,{children:L()})]}),e.jsxs(o,{className:"pp-applist-search",sx:{display:"grid",gridTemplateColumns:"auto auto",gridGap:"10px",justifyContent:"end",alignItems:"center"},children:[e.jsx(Z,{value:p,type:"search",placeholder:"Search",disabled:t===q.FORM,onChange:x=>{s(Se({dbSearch:x.target.value})),localStorage.setItem("ppAppsDbsSearch",x.target.value)},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:e.jsx(xt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(Bs,{})})}}),e.jsx(le,{multiple:!0,size:"small",options:m,getOptionLabel:x=>x.text,isOptionEqualToValue:(x,T)=>x.id===T.id,value:d,disableCloseOnSelect:!0,disabled:t===q.FORM,onChange:(x,T)=>{s(De({dbTypes:T.map(P=>({id:P.id,text:Object.values(Ss)[P.id]}))})),localStorage.setItem("ppAppsDbsSearchType",JSON.stringify(T))},PaperComponent:({children:x})=>e.jsx(We,{sx:{width:`${E}px`},children:x}),renderOption:(x,T,{selected:P})=>e.jsxs("li",{...x,children:[e.jsx(ht,{style:{marginRight:8},checked:P}),T.text]}),renderInput:x=>e.jsx(o,{ref:_,children:e.jsx(Z,{...x,sx:{minWidth:"250px","& .MuiInputBase-root":{backgroundColor:"#fff",padding:"0",maxHeight:"39px",overflow:"hidden"},"& .MuiButtonBase-root.MuiChip-root.MuiAutocomplete-tag":{height:"auto"}},placeholder:d.length===0?"Select app types":""})})})]})]})}),t===q.TABLE&&e.jsx(Rt,{apps:u,search:p,types:d,isLoading:h}),t===q.FORM&&e.jsx(Mt,{setMode:l}),i!==0&&i!==void 0&&e.jsx(St,{appDbId:i})]}),b.isActive===!0&&b.appDbId>0&&e.jsx(ut,{appId:a,appDbId:b.appDbId,designMode:!0,isExploring:!0})]})};export{pr as default};
