import{l as h,ck as Z,r,j as _,dM as $,dN as u,_ as g}from"./main-1.0.10.js";import{l as t}from"./ActionsDml-1.0.10-1992820f.js";import{b as c,ab as W}from"./main-1.0.10-f52b9bd1.js";import{i as N}from"./index-1.0.10-78ba36f8.js";import{A as I,T as V}from"./TextField-1.0.10-1c88e8ee.js";import"./iconBase-1.0.10-ed1594d9.js";import"./Close-1.0.10-2cc4e9e5.js";import"./Menu-1.0.10-18fe74ce.js";const n=({appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,storeForm:E,formMode:y,locale:x})=>{var F,U;h.debug(v,d,j,P,e,s,f,i,E,y,x);const k=c(p=>Z(p,v));h.debug("data",k);const[A,H]=r.useState([]);h.debug("lov",A);const[z,J]=r.useState(Array.isArray((F=s.lookup)==null?void 0:F.dynamicConditions)?(U=s.lookup)==null?void 0:U.dynamicConditions.map(p=>({columnName:p.tableColumnName,columnValue:""})):[]);h.debug("conditions",z),r.useEffect(()=>{var p,b;Array.isArray((p=s.lookup)==null?void 0:p.dynamicConditions)&&((b=s.lookup)==null||b.dynamicConditions.map(S=>{k[S.tableColumnName]===void 0&&h.error("Invalid lookup: column "+S.tableColumnName+" in dynamic condition not found.")})),z.length===0&&q()},[]),r.useEffect(()=>{var p,b;if(Object.keys(z).length>0){const S=Array.isArray((p=s.lookup)==null?void 0:p.dynamicConditions)?(b=s.lookup)==null?void 0:b.dynamicConditions.map(O=>({columnName:O.lookupColumnName,columnValue:k[O.tableColumnName]??""})):[];if(h.debug(S),!N(z,S)){const O={};S.length>0&&S.map(R=>{O[R.columnName]=R.columnValue}),h.debug("reloading dynamic lookup",d,S),q(O),J(S)}}},[k]);const q=(p={})=>{var b,S;t(v,"form",d,((b=s.lookup)==null?void 0:b.key)??"",((S=s.lookup)==null?void 0:S.value)??"",p,{},O=>{var R,w,B;if(h.debug(O.data),!((R=s.lookup)!=null&&R.value.includes(",")))H(O.data);else{const Q=(w=s.lookup)==null?void 0:w.value.split(","),G=[];for(let T=0;T<O.data.length;T++){const X=Q.map(Y=>O.data[T][Y]).join(((B=s.lookup)==null?void 0:B.delimiter)??"");G.push({key:O.data[T].key,value:X})}H(G)}},O=>{h.error(O)})},K=r.useMemo(()=>A.filter(p=>p.key===j)[0]??null,[j,A]);return _.jsx(I,{multiple:!1,fullWidth:!0,autoHighlight:!0,options:A,getOptionLabel:p=>Array.isArray(p.value)?p.value[0]:p.value,value:K,onChange:(p,b)=>{b!==null?L(d,b==null?void 0:b.key):L(d,null)},disabled:y===W.VIEW||y===W.UPDATE&&i.primary_key.includes(d),renderInput:p=>_.jsx(V,{label:e.formLabel,required:e.is_nullable==="NO",...p,inputProps:{...p.inputProps,autoComplete:"new-password"},variant:$(),helperText:u(s,x.selectEnum),disabled:y===W.VIEW||y===W.UPDATE&&i.primary_key.includes(d)})})},M=r.lazy(()=>g(()=>import("./FieldText-1.0.10-7ab83c2e.js"),["./FieldText-1.0.10-7ab83c2e.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js","./InputAdornment-1.0.10-5eb89e09.js"],import.meta.url)),C=r.lazy(()=>g(()=>import("./FieldTextarea-1.0.10-1350f23a.js"),["./FieldTextarea-1.0.10-1350f23a.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js"],import.meta.url)),D=r.lazy(()=>g(()=>import("./FieldNumber-1.0.10-5a79b85d.js"),["./FieldNumber-1.0.10-5a79b85d.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js","./InputAdornment-1.0.10-5eb89e09.js"],import.meta.url)),l=r.lazy(()=>g(()=>import("./FieldSet-1.0.10-bce41208.js"),["./FieldSet-1.0.10-bce41208.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js","./MenuItem-1.0.10-7183fe69.js"],import.meta.url)),o=r.lazy(()=>g(()=>import("./FieldEnum-1.0.10-c3e05036.js"),["./FieldEnum-1.0.10-c3e05036.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js","./MenuItem-1.0.10-7183fe69.js","./EnumTypeEnum-1.0.10-7ffcf33a.js","./RadioGroup-1.0.10-ba763186.js","./Radio-1.0.10-5d5f37f5.js","./FormControlLabel-1.0.10-8c056e28.js"],import.meta.url)),m=r.lazy(()=>g(()=>import("./FieldDate-1.0.10-25bf971b.js"),["./FieldDate-1.0.10-25bf971b.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./FormContainer-1.0.10-29e279c4.js","./AdminTheme-1.0.10-77503373.js","./ActionsDml-1.0.10-1992820f.js","./CardContent-1.0.10-fdbae602.js","./CardActions-1.0.10-2a1d32ba.js","./FormContainer-1.0.10-5da27d24.css","./useMobilePicker-1.0.10-2b3a8dee.js","./DialogContent-1.0.10-806b7ca9.js","./Menu-1.0.10-18fe74ce.js","./InputAdornment-1.0.10-5eb89e09.js","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./AdapterDayjs-1.0.10-acaade8c.js","./DatePicker-1.0.10-5198465d.js","./dateViewRenderers-1.0.10-487cb75d.js"],import.meta.url)),a=r.lazy(()=>g(()=>import("./FieldDatetime-1.0.10-7c0fcaf2.js"),["./FieldDatetime-1.0.10-7c0fcaf2.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./FormContainer-1.0.10-29e279c4.js","./AdminTheme-1.0.10-77503373.js","./ActionsDml-1.0.10-1992820f.js","./CardContent-1.0.10-fdbae602.js","./CardActions-1.0.10-2a1d32ba.js","./FormContainer-1.0.10-5da27d24.css","./useMobilePicker-1.0.10-2b3a8dee.js","./DialogContent-1.0.10-806b7ca9.js","./Menu-1.0.10-18fe74ce.js","./InputAdornment-1.0.10-5eb89e09.js","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./AdapterDayjs-1.0.10-acaade8c.js","./DateTimePicker-1.0.10-db68855b.js","./Tabs-1.0.10-904035cb.js","./date-time-utils-1.0.10-67dd3a9e.js","./MenuItem-1.0.10-7183fe69.js","./dateViewRenderers-1.0.10-487cb75d.js"],import.meta.url)),ii=r.lazy(()=>g(()=>import("./FieldTime-1.0.10-ab128e51.js"),["./FieldTime-1.0.10-ab128e51.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./FormContainer-1.0.10-29e279c4.js","./AdminTheme-1.0.10-77503373.js","./ActionsDml-1.0.10-1992820f.js","./CardContent-1.0.10-fdbae602.js","./CardActions-1.0.10-2a1d32ba.js","./FormContainer-1.0.10-5da27d24.css","./useMobilePicker-1.0.10-2b3a8dee.js","./DialogContent-1.0.10-806b7ca9.js","./Menu-1.0.10-18fe74ce.js","./InputAdornment-1.0.10-5eb89e09.js","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./AdapterDayjs-1.0.10-acaade8c.js","./TimePicker-1.0.10-83f68f18.js","./date-time-utils-1.0.10-67dd3a9e.js","./MenuItem-1.0.10-7183fe69.js"],import.meta.url)),si=r.lazy(()=>g(()=>import("./FieldCheckbox-1.0.10-e841d2c9.js"),["./FieldCheckbox-1.0.10-e841d2c9.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js","./FormControlLabel-1.0.10-8c056e28.js","./Checkbox-1.0.10-8b17dcc2.js"],import.meta.url)),ri=r.lazy(()=>g(()=>import("./ColumnWpMedia-1.0.10-a73da10a.js"),["./ColumnWpMedia-1.0.10-a73da10a.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./index.esm-1.0.10-fc952eac.js","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js","./CardContent-1.0.10-fdbae602.js"],import.meta.url)),di=r.lazy(()=>g(()=>import("./ColumnHyperlink-1.0.10-a5fdd19d.js"),["./ColumnHyperlink-1.0.10-a5fdd19d.js","./main-1.0.10.js","./main-1.0.10-f52b9bd1.js","./iconBase-1.0.10-ed1594d9.js","./main-1.0.10-ca6efa15.css","./TextField-1.0.10-1c88e8ee.js","./Close-1.0.10-2cc4e9e5.js","./Menu-1.0.10-18fe74ce.js","./FormControlLabel-1.0.10-8c056e28.js","./Checkbox-1.0.10-8b17dcc2.js"],import.meta.url)),Ai=({appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})=>{if(h.debug(v,d,j,P,e,s,i,E,y,x),i!=null&&i.media[d]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(i==null?void 0:i.media[d]))return _.jsx(r.Suspense,{children:_.jsx(ri,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,columnMedia:E==null?void 0:E.media[d],mediaType:i==null?void 0:i.media[d]})});if((i==null?void 0:i.media[d])==="HyperlinkObject")return _.jsx(r.Suspense,{children:_.jsx(di,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})})}else{if(e.column_type.toLowerCase()==="tinyint(1)")return _.jsx(r.Suspense,{children:_.jsx(si,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});if(s.lookup!==void 0)return _.jsx(n,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})}switch(e.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return _.jsx(r.Suspense,{children:_.jsx(D,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"enum":return _.jsx(r.Suspense,{children:_.jsx(o,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"set":return _.jsx(r.Suspense,{children:_.jsx(l,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"time":return _.jsx(r.Suspense,{children:_.jsx(ii,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"date":return _.jsx(r.Suspense,{children:_.jsx(m,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"datetime":case"timestamp":return _.jsx(r.Suspense,{children:_.jsx(a,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"tinytext":case"text":case"mediumtext":case"longtext":return _.jsx(r.Suspense,{children:_.jsx(C,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});default:return _.jsx(r.Suspense,{children:_.jsx(M,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})})}};export{Ai as default};
