import{r as u,j as e,_ as oe,l as h,a7 as en,a8 as tn,C as F,a9 as sn,aa as nn,ab as rn,ac as on,ad as an,ae as ln,af as cn,ag as dn,ah as un,ai as pn,aj as mn,ak as xn,al as gn,am as hn,an as et,ao as fn,ap as bn,G as He,aq as jn,ar as In,as as yn,at as Tn,au as Sn,av as Cn,aw as vn,ax as wn,ay as En,az as kn,aA as Ht,aB as _t,aC as tt,aD as st,aE as Mn,aF as Pn,aG as qt,aH as Ke,aI as Xt,aJ as dt,aK as An,aL as _n,aM as Rn,aN as Ln,aO as On,aP as Dn,S as Me,aQ as Jt,a1 as Et,e as L,aR as Fn,aS as Rt,aT as Yt,aU as Vn,aV as Nn,aW as zn,aX as Te,aY as it,aZ as Bn,R as De,a_ as Kn,a$ as Wn,b0 as nt,b1 as ut,b2 as $n,a5 as Ft,P as Gn,v as Vt,x as Un}from"./main-1.0.10.js";import{l as Hn,a as qn,b as Xn,c as Jn,d as Yn,e as Qn,f as Zn,g as er,h as tr,s as sr}from"./ActionsExplorer-1.0.10-9ae320fe.js";import{F as nr,G as rr,H as or,I as Ve,J as rt,B as I,K as ir,u as H,b as A,M as ee,L as qe,N as ar,O as lr,g as cr,T as je,h as dr,P as ur,q as pr,Q as mr,U as Xe,A as ht,e as ft,V as xr,W as gr,X as Qt,Y as Zt,f as es,Z as hr,_ as fr,S as Lt,k as br,v as jr,a as ts,$ as Ir,p as yr}from"./main-1.0.10-f52b9bd1.js";import{u as Tr,g as ss,a as ns,_ as O,b as Ie,c as pt,d as ce,e as Sr,s as bt,f as rs,h as os,i as is,r as be,T as ve,I as de,P as kt}from"./iconBase-1.0.10-ed1594d9.js";import{u as Pe,M as Ae,B as Nt,T as as,a as ls,b as mt,c as Y,d as cs}from"./index.esm-1.0.10-91acd807.js";import{b as ds,B as us,c as ps,d as Cr}from"./index.esm-1.0.10-b71290a7.js";import{T as vr,a as wr}from"./index.esm-1.0.10-4b5803af.js";import{C as le}from"./Checkbox-1.0.10-8b17dcc2.js";import{f as Er,D as kr,g as Mr,h as Pr,C as ge,a as at,T as vt,i as Ar,S as We,R as _r,B as Rr,b as Lr,c as Or,d as Dr,e as zt}from"./settings-1.0.10-7d354621.js";import{c as ms}from"./Close-1.0.10-2cc4e9e5.js";import{P as Bt,D as Fr,a as Vr,b as Nr}from"./DialogContent-1.0.10-806b7ca9.js";import{A as ne,a as zr}from"./AdminTheme-1.0.10-77503373.js";import{L as ye,A as we,a as Ee,b as ke}from"./Link-1.0.10-0c622c62.js";import{C as Mt,a as Pt,B as G}from"./CardContent-1.0.10-fdbae602.js";import{C as Br,a as Kr}from"./index-1.0.10-770ebdb9.js";import{F as q,b as Q,T as re,S as Se,I as xt,a as he,A as Kt}from"./TextField-1.0.10-1c88e8ee.js";import{C as Wr}from"./CardActions-1.0.10-2a1d32ba.js";import{I as Wt}from"./InputAdornment-1.0.10-5eb89e09.js";import{M as K}from"./MenuItem-1.0.10-7183fe69.js";import{A as $r}from"./AdminMetaData-1.0.10-635ad507.js";import{S as Gr}from"./ScopeEnum-1.0.10-dd8f976d.js";import{R as xs}from"./RadioGroup-1.0.10-ba763186.js";import{R as gt}from"./Radio-1.0.10-5d5f37f5.js";import{c as Ur}from"./index-1.0.10-ab8af271.js";import{F as $e}from"./FormControlLabel-1.0.10-8c056e28.js";import{F as Hr}from"./index.esm-1.0.10-fc952eac.js";import{g as qr}from"./ActionsDml-1.0.10-1992820f.js";import{T as $t}from"./Tabs-1.0.10-904035cb.js";import"./Menu-1.0.10-18fe74ce.js";import"./AlertTitle-1.0.10-f0717848.js";import"./useSlot-1.0.10-af1d07b4.js";import"./DateTimePicker-1.0.10-db68855b.js";import"./useMobilePicker-1.0.10-2b3a8dee.js";import"./date-time-utils-1.0.10-67dd3a9e.js";import"./dateViewRenderers-1.0.10-487cb75d.js";import"./TimePicker-1.0.10-83f68f18.js";import"./DatePicker-1.0.10-5198465d.js";function gs(t){return Tr}function Xr(t){return ss("MuiSimpleTreeView",t)}ns("MuiSimpleTreeView",["root"]);const Jr=(t,s)=>{const r=u.useRef({}),[n,o]=u.useState(()=>{const c={};return t.forEach(l=>{l.models&&Object.entries(l.models).forEach(([p,g])=>{r.current[p]={isControlled:s[p]!==void 0,getDefaultValue:g.getDefaultValue},c[p]=g.getDefaultValue(s)})}),c});return Object.fromEntries(Object.entries(r.current).map(([c,l])=>{const p=s[c]??n[c];return[c,{value:p,setControlledValue:g=>{l.isControlled||o(i=>O({},i,{[c]:g}))}}]}))};class Yr{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(s,r,n={}){let o=this.events[s];o||(o={highPriority:new Map,regular:new Map},this.events[s]=o),n.isFirst?o.highPriority.set(r,!0):o.regular.set(r,!0)}removeListener(s,r){this.events[s]&&(this.events[s].regular.delete(r),this.events[s].highPriority.delete(r))}removeAllListeners(){this.events={}}emit(s,...r){const n=this.events[s];if(!n)return;const o=Array.from(n.highPriority.keys()),a=Array.from(n.regular.keys());for(let c=o.length-1;c>=0;c-=1){const l=o[c];n.highPriority.has(l)&&l.apply(this,r)}for(let c=0;c<a.length;c+=1){const l=a[c];n.regular.has(l)&&l.apply(this,r)}}once(s,r){const n=this;this.on(s,function o(...a){n.removeListener(s,o),r.apply(n,a)})}}const Qr=t=>t.isPropagationStopped!==void 0,hs=()=>{const[t]=u.useState(()=>new Yr),s=u.useCallback((...n)=>{const[o,a,c={}]=n;c.defaultMuiPrevented=!1,!(Qr(c)&&c.isPropagationStopped())&&t.emit(o,a,c)},[t]),r=u.useCallback((n,o)=>(t.on(n,o),()=>{t.removeListener(n,o)}),[t]);return{instance:{$$publishEvent:s,$$subscribeEvent:r}}};hs.params={};const fs=({params:t})=>{const s=nr(t.id),r=u.useCallback((n,o)=>o??`${s}-${n}`,[s]);return{getRootProps:()=>({id:s}),instance:{getTreeItemIdAttribute:r}}};fs.params={id:!0};const Zr=[hs,fs],eo=["slots","slotProps","apiRef","experimentalFeatures"],to=t=>{let{props:{slots:s,slotProps:r,apiRef:n,experimentalFeatures:o},plugins:a}=t,c=Ie(t.props,eo);const l={};a.forEach(x=>{Object.assign(l,x.params)});const p={},g={};Object.keys(c).forEach(x=>{const j=c[x];l[x]?p[x]=j:g[x]=j});const i=a.reduce((x,j)=>j.getDefaultizedParams?j.getDefaultizedParams(x):x,p);return{apiRef:n,forwardedProps:g,pluginParams:i,slots:s??{},slotProps:r??{},experimentalFeatures:o??{}}};function so(t){const s=u.useRef({});return t?(t.current==null&&(t.current={}),t.current):s.current}const no=({plugins:t,rootRef:s,props:r})=>{const n=[...Zr,...t],{pluginParams:o,forwardedProps:a,apiRef:c,experimentalFeatures:l,slots:p,slotProps:g}=to({plugins:n,props:r}),i=Jr(n,o),j=u.useRef({}).current,f=so(c),b=u.useRef(null),m=pt(b,s),[d,C]=u.useState(()=>{const T={};return n.forEach(S=>{S.getInitialState&&Object.assign(T,S.getInitialState(o))}),T}),v=n.map(T=>T.wrapItem).filter(T=>!!T),k=({itemId:T,children:S})=>{let E=S;return v.forEach(P=>{E=P({itemId:T,children:E,instance:j})}),E},_=n.map(T=>T.wrapRoot).filter(T=>!!T).reverse(),N={publicAPI:f,wrapItem:k,wrapRoot:({children:T})=>{let S=T;return _.forEach(E=>{S=E({children:S,instance:j})}),S},runItemPlugins:T=>{let S=null,E=null;return n.forEach(P=>{if(!P.itemPlugin)return;const R=P.itemPlugin({props:T,rootRef:S,contentRef:E});R!=null&&R.rootRef&&(S=R.rootRef),R!=null&&R.contentRef&&(E=R.contentRef)}),{contentRef:E,rootRef:S}},instance:j,rootRef:b},D=[],z=T=>{const S=T({instance:j,params:o,slots:p,slotProps:g,experimentalFeatures:l,state:d,setState:C,rootRef:b,models:i});S.getRootProps&&D.push(S.getRootProps),S.publicAPI&&Object.assign(f,S.publicAPI),S.instance&&Object.assign(j,S.instance),S.contextValue&&Object.assign(N,S.contextValue)};return n.forEach(z),{getRootProps:(T={})=>{const S=O({role:"tree"},a,T,{ref:m});return D.forEach(E=>{Object.assign(S,E(T))}),S},rootRef:m,contextValue:N,instance:j}},bs=u.createContext(null);function ro(t){const{value:s,children:r}=t;return e.jsx(bs.Provider,{value:s,children:s.wrapRoot({children:r})})}const js=(t,s,r)=>{t.$$publishEvent(s,r)},Ce="__TREE_VIEW_ROOT_PARENT_ID__",Is=t=>{const s={};return t.forEach((r,n)=>{s[r]=n}),s},Ge=u.createContext(()=>-1),ys=({items:t,isItemDisabled:s,getItemLabel:r,getItemId:n})=>{const o={},a={},c={[Ce]:[]},l=(g,i,x)=>{var m,d;const j=n?n(g):g.id;if(j==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(g)].join(`
`));if(o[j]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${j}"`].join(`
`));const f=r?r(g):g.label;if(f==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(g)].join(`
`));o[j]={id:j,label:f,parentId:x,idAttribute:void 0,expandable:!!((m=g.children)!=null&&m.length),disabled:s?s(g):!1,depth:i},a[j]=g,c[j]=[];const b=x??Ce;c[b]||(c[b]=[]),c[b].push(j),(d=g.children)==null||d.forEach(C=>l(C,i+1,j))};t.forEach(g=>l(g,0,null));const p={};return Object.keys(c).forEach(g=>{p[g]=Is(c[g])}),{itemMetaMap:o,itemMap:a,itemOrderedChildrenIds:c,itemChildrenIndexes:p}},Je=({instance:t,params:s,state:r,setState:n,experimentalFeatures:o})=>{const a=u.useCallback(m=>r.items.itemMetaMap[m],[r.items.itemMetaMap]),c=u.useCallback(m=>r.items.itemMap[m],[r.items.itemMap]),l=u.useCallback(m=>{if(m==null)return!1;let d=t.getItemMeta(m);if(!d)return!1;if(d.disabled)return!0;for(;d.parentId!=null;)if(d=t.getItemMeta(d.parentId),d.disabled)return!0;return!1},[t]),p=u.useCallback(m=>{const d=t.getItemMeta(m).parentId??Ce;return r.items.itemChildrenIndexes[d][m]},[t,r.items.itemChildrenIndexes]),g=u.useCallback(m=>r.items.itemOrderedChildrenIds[m??Ce]??[],[r.items.itemOrderedChildrenIds]),i=m=>s.disabledItemsFocusable?!0:!t.isItemDisabled(m),x=u.useRef(!1),j=u.useCallback(()=>{x.current=!0},[]),f=u.useCallback(()=>x.current,[]);return u.useEffect(()=>{t.areItemUpdatesPrevented()||n(m=>{const d=ys({items:s.items,isItemDisabled:s.isItemDisabled,getItemId:s.getItemId,getItemLabel:s.getItemLabel});return Object.values(m.items.itemMetaMap).forEach(C=>{d.itemMetaMap[C.id]||js(t,"removeItem",{id:C.id})}),O({},m,{items:d})})},[t,n,s.items,s.isItemDisabled,s.getItemId,s.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof s.itemChildrenIndentation=="number"?`${s.itemChildrenIndentation}px`:s.itemChildrenIndentation}}),publicAPI:{getItem:c},instance:{getItemMeta:a,getItem:c,getItemsToRender:()=>{const m=d=>{const C=r.items.itemMetaMap[d];return{label:C.label,itemId:C.id,id:C.idAttribute,children:r.items.itemOrderedChildrenIds[d].map(m)}};return r.items.itemOrderedChildrenIds[Ce].map(m)},getItemIndex:p,getItemOrderedChildrenIds:g,isItemDisabled:l,isItemNavigable:i,preventItemUpdates:j,areItemUpdatesPrevented:f},contextValue:{disabledItemsFocusable:s.disabledItemsFocusable,indentationAtItemLevel:o.indentationAtItemLevel??!1}}};Je.getInitialState=t=>({items:ys({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel})});Je.getDefaultizedParams=t=>O({},t,{disabledItemsFocusable:t.disabledItemsFocusable??!1,itemChildrenIndentation:t.itemChildrenIndentation??"12px"});Je.wrapRoot=({children:t,instance:s})=>e.jsx(Ge.Provider,{value:r=>{var n;return((n=s.getItemMeta(r))==null?void 0:n.depth)??0},children:t});Je.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,itemChildrenIndentation:!0};const jt=({instance:t,params:s,models:r})=>{const n=u.useMemo(()=>{const x=new Map;return r.expandedItems.value.forEach(j=>{x.set(j,!0)}),x},[r.expandedItems.value]),o=(x,j)=>{var f;(f=s.onExpandedItemsChange)==null||f.call(s,x,j),r.expandedItems.setControlledValue(j)},a=u.useCallback(x=>n.has(x),[n]),c=u.useCallback(x=>{var j;return!!((j=t.getItemMeta(x))!=null&&j.expandable)},[t]),l=ce((x,j)=>{const f=t.isItemExpanded(j);t.setItemExpansion(x,j,!f)}),p=ce((x,j,f)=>{if(t.isItemExpanded(j)===f)return;let m;f?m=[j].concat(r.expandedItems.value):m=r.expandedItems.value.filter(d=>d!==j),s.onItemExpansionToggle&&s.onItemExpansionToggle(x,j,f),o(x,m)}),g=(x,j)=>{const f=t.getItemMeta(j),m=t.getItemOrderedChildrenIds(f.parentId).filter(C=>t.isItemExpandable(C)&&!t.isItemExpanded(C)),d=r.expandedItems.value.concat(m);m.length>0&&(s.onItemExpansionToggle&&m.forEach(C=>{s.onItemExpansionToggle(x,C,!0)}),o(x,d))},i=u.useMemo(()=>s.expansionTrigger?s.expansionTrigger:"content",[s.expansionTrigger]);return{publicAPI:{setItemExpansion:p},instance:{isItemExpanded:a,isItemExpandable:c,setItemExpansion:p,toggleItemExpansion:l,expandAllSiblings:g},contextValue:{expansion:{expansionTrigger:i}}}};jt.models={expandedItems:{getDefaultValue:t=>t.defaultExpandedItems}};const oo=[];jt.getDefaultizedParams=t=>O({},t,{defaultExpandedItems:t.defaultExpandedItems??oo});jt.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const Ts=(t,s)=>{let r=s.length-1;for(;r>=0&&!t.isItemNavigable(s[r]);)r-=1;if(r!==-1)return s[r]},Ss=(t,s)=>{const r=t.getItemMeta(s),n=t.getItemOrderedChildrenIds(r.parentId),o=t.getItemIndex(s);if(o===0)return r.parentId;let a=o-1;for(;!t.isItemNavigable(n[a])&&a>=0;)a-=1;if(a===-1)return r.parentId==null?null:Ss(t,r.parentId);let c=n[a],l=Ts(t,t.getItemOrderedChildrenIds(c));for(;t.isItemExpanded(c)&&l!=null;)c=l,l=t.getItemOrderedChildrenIds(c).find(t.isItemNavigable);return c},lt=(t,s)=>{if(t.isItemExpanded(s)){const n=t.getItemOrderedChildrenIds(s).find(t.isItemNavigable);if(n!=null)return n}let r=t.getItemMeta(s);for(;r!=null;){const n=t.getItemOrderedChildrenIds(r.parentId),o=t.getItemIndex(r.id);if(o<n.length-1){let a=o+1;for(;!t.isItemNavigable(n[a])&&a<n.length-1;)a+=1;if(t.isItemNavigable(n[a]))return n[a]}r=t.getItemMeta(r.parentId)}return null},Cs=t=>{let s=null;for(;s==null||t.isItemExpanded(s);){const r=t.getItemOrderedChildrenIds(s),n=Ts(t,r);if(n==null)return s;s=n}return s},Ue=t=>t.getItemOrderedChildrenIds(null).find(t.isItemNavigable),vs=(t,s,r)=>{if(s===r)return[s,r];const n=t.getItemMeta(s),o=t.getItemMeta(r);if(n.parentId===o.id||o.parentId===n.id)return o.parentId===n.id?[n.id,o.id]:[o.id,n.id];const a=[n.id],c=[o.id];let l=n.parentId,p=o.parentId,g=c.indexOf(l)!==-1,i=a.indexOf(p)!==-1,x=!0,j=!0;for(;!i&&!g;)x&&(a.push(l),g=c.indexOf(l)!==-1,x=l!==null,!g&&x&&(l=t.getItemMeta(l).parentId)),j&&!g&&(c.push(p),i=a.indexOf(p)!==-1,j=p!==null,!i&&j&&(p=t.getItemMeta(p).parentId));const f=g?l:p,b=t.getItemOrderedChildrenIds(f),m=a[a.indexOf(f)-1],d=c[c.indexOf(f)-1];return b.indexOf(m)<b.indexOf(d)?[s,r]:[r,s]},io=(t,s,r)=>{const n=p=>{if(t.isItemExpandable(p)&&t.isItemExpanded(p))return t.getItemOrderedChildrenIds(p)[0];let g=t.getItemMeta(p);for(;g!=null;){const i=t.getItemOrderedChildrenIds(g.parentId),x=t.getItemIndex(g.id);if(x<i.length-1)return i[x+1];g=t.getItemMeta(g.parentId)}throw new Error("Invalid range")},[o,a]=vs(t,s,r),c=[o];let l=o;for(;l!==a;)l=n(l),t.isItemDisabled(l)||c.push(l);return c},ao=t=>{let s=Ue(t);const r=[];for(;s!=null;)r.push(s),s=lt(t,s);return r},ct=t=>Array.isArray(t)?t:t!=null?[t]:[],wt=t=>{const s={};return t.forEach(r=>{s[r]=!0}),s},It=({instance:t,params:s,models:r})=>{const n=u.useRef(null),o=u.useRef({}),a=u.useMemo(()=>{const m=new Map;return Array.isArray(r.selectedItems.value)?r.selectedItems.value.forEach(d=>{m.set(d,!0)}):r.selectedItems.value!=null&&m.set(r.selectedItems.value,!0),m},[r.selectedItems.value]),c=(m,d)=>{if(s.onItemSelectionToggle)if(s.multiSelect){const C=d.filter(k=>!t.isItemSelected(k)),v=r.selectedItems.value.filter(k=>!d.includes(k));C.forEach(k=>{s.onItemSelectionToggle(m,k,!0)}),v.forEach(k=>{s.onItemSelectionToggle(m,k,!1)})}else d!==r.selectedItems.value&&(r.selectedItems.value!=null&&s.onItemSelectionToggle(m,r.selectedItems.value,!1),d!=null&&s.onItemSelectionToggle(m,d,!0));s.onSelectedItemsChange&&s.onSelectedItemsChange(m,d),r.selectedItems.setControlledValue(d)},l=m=>a.has(m),p=(m,d,C,v)=>{if(s.disableSelection)return;let k;if(C){const _=ct(r.selectedItems.value),V=t.isItemSelected(d);V&&(v===!1||v==null)?k=_.filter(M=>M!==d):!V&&(v===!0||v==null)?k=[d].concat(_):k=_}else v===!1?k=s.multiSelect?[]:null:k=s.multiSelect?[d]:d;c(m,k),n.current=d,o.current={}},g=(m,[d,C])=>{if(s.disableSelection||!s.multiSelect)return;let v=ct(r.selectedItems.value).slice();Object.keys(o.current).length>0&&(v=v.filter(M=>!o.current[M]));const k=wt(v),_=io(t,d,C),V=_.filter(M=>!k[M]);v=v.concat(V),c(m,v),o.current=wt(_)};return{getRootProps:()=>({"aria-multiselectable":s.multiSelect}),instance:{isItemSelected:l,selectItem:p,selectAllNavigableItems:m=>{if(s.disableSelection||!s.multiSelect)return;const d=ao(t);c(m,d),o.current=wt(d)},expandSelectionRange:(m,d)=>{if(n.current!=null){const[C,v]=vs(t,d,n.current);g(m,[C,v])}},selectRangeFromStartToItem:(m,d)=>{g(m,[Ue(t),d])},selectRangeFromItemToEnd:(m,d)=>{g(m,[d,Cs(t)])},selectItemFromArrowNavigation:(m,d,C)=>{if(s.disableSelection||!s.multiSelect)return;let v=ct(r.selectedItems.value).slice();Object.keys(o.current).length===0?(v.push(C),o.current={[d]:!0,[C]:!0}):(o.current[d]||(o.current={}),o.current[C]?(v=v.filter(k=>k!==d),delete o.current[d]):(v.push(C),o.current[C]=!0)),c(m,v)}},contextValue:{selection:{multiSelect:s.multiSelect,checkboxSelection:s.checkboxSelection,disableSelection:s.disableSelection}}}};It.models={selectedItems:{getDefaultValue:t=>t.defaultSelectedItems}};const lo=[];It.getDefaultizedParams=t=>O({},t,{disableSelection:t.disableSelection??!1,multiSelect:t.multiSelect??!1,checkboxSelection:t.checkboxSelection??!1,defaultSelectedItems:t.defaultSelectedItems??(t.multiSelect?lo:null)});It.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const Gt=1e3;class co{constructor(s=Gt){this.timeouts=new Map,this.cleanupTimeout=Gt,this.cleanupTimeout=s}register(s,r,n){this.timeouts||(this.timeouts=new Map);const o=setTimeout(()=>{typeof r=="function"&&r(),this.timeouts.delete(n.cleanupToken)},this.cleanupTimeout);this.timeouts.set(n.cleanupToken,o)}unregister(s){const r=this.timeouts.get(s.cleanupToken);r&&(this.timeouts.delete(s.cleanupToken),clearTimeout(r))}reset(){this.timeouts&&(this.timeouts.forEach((s,r)=>{this.unregister({cleanupToken:r})}),this.timeouts=void 0)}}class uo{constructor(){this.registry=new FinalizationRegistry(s=>{typeof s=="function"&&s()})}register(s,r,n){this.registry.register(s,r,n)}unregister(s){this.registry.unregister(s)}reset(){}}class po{}function mo(t){let s=0;return function(n,o,a){t.registry===null&&(t.registry=typeof FinalizationRegistry<"u"?new uo:new co);const[c]=u.useState(new po),l=u.useRef(null),p=u.useRef();p.current=a;const g=u.useRef(null);if(!l.current&&p.current){const i=(x,j)=>{var f;j.defaultMuiPrevented||(f=p.current)==null||f.call(p,x,j)};l.current=n.$$subscribeEvent(o,i),s+=1,g.current={cleanupToken:s},t.registry.register(c,()=>{var x;(x=l.current)==null||x.call(l),l.current=null,g.current=null},g.current)}else!p.current&&l.current&&(l.current(),l.current=null,g.current&&(t.registry.unregister(g.current),g.current=null));u.useEffect(()=>{if(!l.current&&p.current){const i=(x,j)=>{var f;j.defaultMuiPrevented||(f=p.current)==null||f.call(p,x,j)};l.current=n.$$subscribeEvent(o,i)}return g.current&&t.registry&&(t.registry.unregister(g.current),g.current=null),()=>{var i;(i=l.current)==null||i.call(l),l.current=null}},[n,o])}}const xo={registry:null},go=mo(xo),ws=(t=document)=>{const s=t.activeElement;return s?s.shadowRoot?ws(s.shadowRoot):s:null};function ho(t){return t.replace(/["\\]/g,"\\$&")}const fo=(t,s)=>{let r=ct(s).find(n=>{if(!t.isItemNavigable(n))return!1;const o=t.getItemMeta(n);return o&&(o.parentId==null||t.isItemExpanded(o.parentId))});return r==null&&(r=Ue(t)),r},Ot=({instance:t,params:s,state:r,setState:n,models:o,rootRef:a})=>{const c=fo(t,o.selectedItems.value),l=ce(d=>{const C=typeof d=="function"?d(r.focusedItemId):d;r.focusedItemId!==C&&n(v=>O({},v,{focusedItemId:C}))}),p=u.useCallback(()=>!!a.current&&a.current.contains(ws(rr(a.current))),[a]),g=u.useCallback(d=>r.focusedItemId===d&&p(),[r.focusedItemId,p]),i=d=>{const C=t.getItemMeta(d);return C&&(C.parentId==null||t.isItemExpanded(C.parentId))},x=(d,C)=>{const v=t.getItemMeta(C),k=document.getElementById(t.getTreeItemIdAttribute(C,v.idAttribute));k&&k.focus(),l(C),s.onItemFocus&&s.onItemFocus(d,C)},j=ce((d,C)=>{i(C)&&x(d,C)}),f=ce(()=>{if(r.focusedItemId==null)return;const d=t.getItemMeta(r.focusedItemId);if(d){const C=document.getElementById(t.getTreeItemIdAttribute(r.focusedItemId,d.idAttribute));C&&C.blur()}l(null)}),b=d=>d===c;go(t,"removeItem",({id:d})=>{r.focusedItemId===d&&x(null,c)});const m=d=>C=>{var v;(v=d.onFocus)==null||v.call(d,C),!C.defaultMuiPrevented&&C.target===C.currentTarget&&x(C,c)};return{getRootProps:d=>({onFocus:m(d)}),publicAPI:{focusItem:j},instance:{isItemFocused:g,canItemBeTabbed:b,focusItem:j,removeFocusedItem:f}}};Ot.getInitialState=()=>({focusedItemId:null});Ot.params={onItemFocus:!0};function bo(t){return!!t&&t.length===1&&!!t.match(/\S/)}const Es=({instance:t,params:s,state:r})=>{const n=or(),o=u.useRef({}),a=ce(i=>{o.current=i(o.current)});u.useEffect(()=>{if(t.areItemUpdatesPrevented())return;const i={},x=j=>{i[j.id]=j.label.substring(0,1).toLowerCase()};Object.values(r.items.itemMetaMap).forEach(x),o.current=i},[r.items.itemMetaMap,s.getItemId,t]);const c=(i,x)=>{const j=x.toLowerCase(),f=C=>{const v=lt(t,C);return v===null?Ue(t):v};let b=null,m=f(i);const d={};for(;b==null&&!d[m];)o.current[m]===j?b=m:(d[m]=!0,m=f(m));return b},l=i=>!s.disableSelection&&!t.isItemDisabled(i),p=i=>!t.isItemDisabled(i)&&t.isItemExpandable(i);return{instance:{updateFirstCharMap:a,handleItemKeyDown:(i,x)=>{if(i.defaultMuiPrevented||i.altKey||i.currentTarget!==i.target.closest('*[role="treeitem"]'))return;const j=i.ctrlKey||i.metaKey,f=i.key;switch(!0){case(f===" "&&l(x)):{i.preventDefault(),s.multiSelect&&i.shiftKey?t.expandSelectionRange(i,x):s.multiSelect?t.selectItem(i,x,!0):t.selectItem(i,x,!1);break}case f==="Enter":{p(x)?(t.toggleItemExpansion(i,x),i.preventDefault()):l(x)&&(s.multiSelect?(i.preventDefault(),t.selectItem(i,x,!0)):t.isItemSelected(x)||(t.selectItem(i,x,!1),i.preventDefault()));break}case f==="ArrowDown":{const b=lt(t,x);b&&(i.preventDefault(),t.focusItem(i,b),s.multiSelect&&i.shiftKey&&l(b)&&t.selectItemFromArrowNavigation(i,x,b));break}case f==="ArrowUp":{const b=Ss(t,x);b&&(i.preventDefault(),t.focusItem(i,b),s.multiSelect&&i.shiftKey&&l(b)&&t.selectItemFromArrowNavigation(i,x,b));break}case(f==="ArrowRight"&&!n||f==="ArrowLeft"&&n):{if(t.isItemExpanded(x)){const b=lt(t,x);b&&(t.focusItem(i,b),i.preventDefault())}else p(x)&&(t.toggleItemExpansion(i,x),i.preventDefault());break}case(f==="ArrowLeft"&&!n||f==="ArrowRight"&&n):{if(p(x)&&t.isItemExpanded(x))t.toggleItemExpansion(i,x),i.preventDefault();else{const b=t.getItemMeta(x).parentId;b&&(t.focusItem(i,b),i.preventDefault())}break}case f==="Home":{l(x)&&s.multiSelect&&j&&i.shiftKey?t.selectRangeFromStartToItem(i,x):t.focusItem(i,Ue(t)),i.preventDefault();break}case f==="End":{l(x)&&s.multiSelect&&j&&i.shiftKey?t.selectRangeFromItemToEnd(i,x):t.focusItem(i,Cs(t)),i.preventDefault();break}case f==="*":{t.expandAllSiblings(i,x),i.preventDefault();break}case(f==="a"&&j&&s.multiSelect&&!s.disableSelection):{t.selectAllNavigableItems(i),i.preventDefault();break}case(!j&&!i.shiftKey&&bo(f)):{const b=c(x,f);b!=null&&(t.focusItem(i,b),i.preventDefault());break}}}}}};Es.params={};const ks=({slots:t,slotProps:s})=>({contextValue:{icons:{slots:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon},slotProps:{collapseIcon:s.collapseIcon,expandIcon:s.expandIcon,endIcon:s.endIcon}}}});ks.params={};const Ye=()=>{const t=u.useContext(bs);if(t==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return t},Ms=u.createContext(null);function Ps(t){const{children:s,itemId:r=null}=t,{instance:n,rootRef:o}=Ye(),a=u.useRef(new Map);u.useEffect(()=>{if(!o.current)return;let l=null;if(r==null)l=o.current.id;else{const f=n.getItemMeta(r);f!==void 0&&(l=n.getTreeItemIdAttribute(r,f.idAttribute))}if(l==null)return;const p=n.getItemOrderedChildrenIds(r??null)??[],g=ho(l),i=o.current.querySelectorAll(`${r==null?"":`*[id="${g}"] `}[role="treeitem"]:not(*[id="${g}"] [role="treeitem"] [role="treeitem"])`),x=Array.from(i).map(f=>a.current.get(f.id));(x.length!==p.length||x.some((f,b)=>f!==p[b]))&&n.setJSXItemsOrderedChildrenIds(r??null,x)});const c=u.useMemo(()=>({registerChild:(l,p)=>a.current.set(l,p),unregisterChild:l=>a.current.delete(l),parentId:r}),[r]);return e.jsx(Ms.Provider,{value:c,children:s})}const Qe=({instance:t,setState:s})=>{t.preventItemUpdates();const r=ce(a=>(s(c=>{if(c.items.itemMetaMap[a.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${a.id}"`].join(`
`));return O({},c,{items:O({},c.items,{itemMetaMap:O({},c.items.itemMetaMap,{[a.id]:a}),itemMap:O({},c.items.itemMap,{[a.id]:{id:a.id,label:a.label}})})})}),()=>{s(c=>{const l=O({},c.items.itemMetaMap),p=O({},c.items.itemMap);return delete l[a.id],delete p[a.id],O({},c,{items:O({},c.items,{itemMetaMap:l,itemMap:p})})}),js(t,"removeItem",{id:a.id})})),n=(a,c)=>{const l=a??Ce;s(p=>O({},p,{items:O({},p.items,{itemOrderedChildrenIds:O({},p.items.itemOrderedChildrenIds,{[l]:c}),itemChildrenIndexes:O({},p.items.itemChildrenIndexes,{[l]:Is(c)})})}))},o=ce((a,c)=>(t.updateFirstCharMap(l=>(l[a]=c,l)),()=>{t.updateFirstCharMap(l=>{const p=O({},l);return delete p[a],p})}));return{instance:{insertJSXItem:r,setJSXItemsOrderedChildrenIds:n,mapFirstCharFromJSX:o}}},As=t=>Array.isArray(t)?t.length>0&&t.some(As):!!t,jo=({props:t,rootRef:s,contentRef:r})=>{const{instance:n}=Ye(),{children:o,disabled:a=!1,label:c,itemId:l,id:p}=t,g=u.useContext(Ms);if(g==null)throw new Error(["MUI X: Could not find the Tree View Children Item context.","It looks like you rendered your component outside of a SimpleTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));const{registerChild:i,unregisterChild:x,parentId:j}=g,f=As(o),b=u.useRef(null),m=pt(b,r);return Sr(()=>{const d=n.getTreeItemIdAttribute(l,p);return i(d,l),()=>{x(d)}},[n,i,x,l,p]),u.useEffect(()=>n.insertJSXItem({id:l,idAttribute:p,parentId:j,expandable:f,disabled:a}),[n,j,l,f,a,p]),u.useEffect(()=>{var d;if(c)return n.mapFirstCharFromJSX(l,(((d=b.current)==null?void 0:d.textContent)??"").substring(0,1).toLowerCase())},[n,l,c]),{contentRef:m,rootRef:s}};Qe.itemPlugin=jo;Qe.wrapItem=({children:t,itemId:s})=>{const r=u.useContext(Ge);return e.jsx(Ps,{itemId:s,children:e.jsx(Ge.Provider,{value:r+1,children:t})})};Qe.wrapRoot=({children:t})=>e.jsx(Ps,{children:e.jsx(Ge.Provider,{value:0,children:t})});Qe.params={};const Io=[Je,jt,It,Ot,Es,ks,Qe],yo=(t,s="warning")=>{let r=!1;const n=Array.isArray(t)?t.join(`
`):t;return()=>{r||(r=!0,s==="error"?console.error(n):console.warn(n))}},To=gs(),So=t=>{const{classes:s}=t;return rs({root:["root"]},Xr,s)},Co=bt("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(t,s)=>s.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),vo=[];yo(["MUI X: The `SimpleTreeView` component does not support the `items` prop.","If you want to add items, you need to pass them as JSX children.","Check the documentation for more details: https://mui.com/x/react-tree-view/simple-tree-view/items/"]);const Ze=u.forwardRef(function(s,r){const n=To({props:s,name:"MuiSimpleTreeView"}),o=n,{getRootProps:a,contextValue:c}=no({plugins:Io,rootRef:r,props:O({},n,{items:vo})}),{slots:l,slotProps:p}=n,g=So(n),i=(l==null?void 0:l.root)??Co,x=Ve({elementType:i,externalSlotProps:p==null?void 0:p.root,className:g.root,getSlotProps:a,ownerState:o});return e.jsx(ro,{value:c,children:e.jsx(i,O({},x))})});function _s(t){const{instance:s,selection:{multiSelect:r,checkboxSelection:n,disableSelection:o},expansion:{expansionTrigger:a}}=Ye(),c=s.isItemExpandable(t),l=s.isItemExpanded(t),p=s.isItemFocused(t),g=s.isItemSelected(t),i=s.isItemDisabled(t);return{disabled:i,expanded:l,selected:g,focused:p,disableSelection:o,checkboxSelection:n,handleExpansion:m=>{if(!i){p||s.focusItem(m,t);const d=r&&(m.shiftKey||m.ctrlKey||m.metaKey);c&&!(d&&s.isItemExpanded(t))&&s.toggleItemExpansion(m,t)}},handleSelection:m=>{i||(p||s.focusItem(m,t),r&&(m.shiftKey||m.ctrlKey||m.metaKey)?m.shiftKey?s.expandSelectionRange(m,t):s.selectItem(m,t,!0):s.selectItem(m,t,!1))},handleCheckboxSelection:m=>{if(o||i)return;const d=m.nativeEvent.shiftKey;r&&d?s.expandSelectionRange(m,t):s.selectItem(m,t,r,m.target.checked)},preventSelection:m=>{(m.shiftKey||m.ctrlKey||m.metaKey||i)&&m.preventDefault()},expansionTrigger:a}}const wo=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown"],Rs=u.forwardRef(function(s,r){const{classes:n,className:o,displayIcon:a,expansionIcon:c,icon:l,label:p,itemId:g,onClick:i,onMouseDown:x}=s,j=Ie(s,wo),{disabled:f,expanded:b,selected:m,focused:d,disableSelection:C,checkboxSelection:v,handleExpansion:k,handleSelection:_,handleCheckboxSelection:V,preventSelection:M,expansionTrigger:N}=_s(g),D=l||c||a,z=u.useRef(null),w=S=>{M(S),x&&x(S)},T=S=>{var E;(E=z.current)!=null&&E.contains(S.target)||(N==="content"&&k(S),v||_(S),i&&i(S))};return e.jsxs("div",O({},j,{className:os(o,n.root,b&&n.expanded,m&&n.selected,d&&n.focused,f&&n.disabled),onClick:T,onMouseDown:w,ref:r,children:[e.jsx("div",{className:n.iconContainer,children:D}),v&&e.jsx(le,{className:n.checkbox,checked:m,onChange:V,disabled:f||C,ref:z,tabIndex:-1}),e.jsx("div",{className:n.label,children:p})]}))});function Eo(t){return ss("MuiTreeItem",t)}const se=ns("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label","checkbox"]),ko=ms(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),Mo=ms(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function Ls(t){const{children:s,itemId:r}=t,{wrapItem:n,instance:o}=Ye();return n({children:s,itemId:r,instance:o})}Ls.propTypes={children:Bt.node,itemId:Bt.string.isRequired};const Po=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],Ao=["ownerState"],_o=["ownerState"],Ro=["ownerState"],Lo=gs(),Oo=t=>{const{classes:s}=t;return rs({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],groupTransition:["groupTransition"]},Eo,s)},Do=bt("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,s)=>s.root})({listStyle:"none",margin:0,padding:0,outline:0}),Fo=bt(Rs,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,s)=>[s.content,s.iconContainer&&{[`& .${se.iconContainer}`]:s.iconContainer},s.label&&{[`& .${se.label}`]:s.label}],shouldForwardProp:t=>is(t)&&t!=="indentationAtItemLevel"})(({theme:t})=>({padding:t.spacing(.5,1),borderRadius:t.shape.borderRadius,width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",gap:t.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${se.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${se.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${se.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rt(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:rt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rt(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${se.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:rt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${se.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${se.label}`]:O({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},t.typography.body1),[`& .${se.checkbox}`]:{padding:0},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${t.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}}]})),Vo=bt(Er,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(t,s)=>s.groupTransition,shouldForwardProp:t=>is(t)&&t!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),Z=u.forwardRef(function(s,r){const{icons:n,runItemPlugins:o,selection:{multiSelect:a},expansion:{expansionTrigger:c},disabledItemsFocusable:l,indentationAtItemLevel:p,instance:g}=Ye(),i=u.useContext(Ge),x=Lo({props:s,name:"MuiTreeItem"}),{children:j,className:f,slots:b,slotProps:m,ContentComponent:d=Rs,ContentProps:C,itemId:v,id:k,label:_,onClick:V,onMouseDown:M,onBlur:N,onKeyDown:D}=x,z=Ie(x,Po),{expanded:w,focused:T,selected:S,disabled:E,handleExpansion:P}=_s(v),{contentRef:R,rootRef:ie}=o(x),W=pt(r,ie),pe=pt(C==null?void 0:C.ref,R),ae={expandIcon:(b==null?void 0:b.expandIcon)??n.slots.expandIcon??ko,collapseIcon:(b==null?void 0:b.collapseIcon)??n.slots.collapseIcon??Mo,endIcon:(b==null?void 0:b.endIcon)??n.slots.endIcon,icon:b==null?void 0:b.icon,groupTransition:b==null?void 0:b.groupTransition},Le=B=>Array.isArray(B)?B.length>0&&B.some(Le):!!B,me=Le(j),fe=O({},x,{expanded:w,focused:T,selected:S,disabled:E,indentationAtItemLevel:p}),X=Oo(fe),Oe=ae.groupTransition??void 0,y=Ve({elementType:Oe,ownerState:{},externalSlotProps:m==null?void 0:m.groupTransition,additionalProps:O({unmountOnExit:!0,in:w,component:"ul",role:"group"},p?{indentationAtItemLevel:!0}:{}),className:X.groupTransition}),te=B=>{c==="iconContainer"&&P(B)},yt=w?ae.collapseIcon:ae.expandIcon,zs=Ve({elementType:yt,ownerState:{},externalSlotProps:B=>w?O({},be(n.slotProps.collapseIcon,B),be(m==null?void 0:m.collapseIcon,B)):O({},be(n.slotProps.expandIcon,B),be(m==null?void 0:m.expandIcon,B)),additionalProps:{onClick:te}}),Bs=Ie(zs,Ao),Ks=me&&yt?e.jsx(yt,O({},Bs)):null,Tt=me?void 0:ae.endIcon,Ws=Ve({elementType:Tt,ownerState:{},externalSlotProps:B=>me?{}:O({},be(n.slotProps.endIcon,B),be(m==null?void 0:m.endIcon,B))}),$s=Ie(Ws,_o),Gs=Tt?e.jsx(Tt,O({},$s)):null,St=ae.icon,Us=Ve({elementType:St,ownerState:{},externalSlotProps:m==null?void 0:m.icon}),Hs=Ie(Us,Ro),qs=St?e.jsx(St,O({},Hs)):null;let Ct;a?Ct=S:S&&(Ct=!0);function Xs(B){!T&&(!E||l)&&B.currentTarget===B.target&&g.focusItem(B,v)}function Js(B){N==null||N(B),g.removeFocusedItem()}const Ys=B=>{D==null||D(B),g.handleItemKeyDown(B,v)},Qs=g.getTreeItemIdAttribute(v,k),Zs=g.canItemBeTabbed(v)?0:-1;return e.jsx(Ls,{itemId:v,children:e.jsxs(Do,O({className:os(X.root,f),role:"treeitem","aria-expanded":me?w:void 0,"aria-selected":Ct,"aria-disabled":E||void 0,id:Qs,tabIndex:Zs},z,{ownerState:fe,onFocus:Xs,onBlur:Js,onKeyDown:Ys,ref:W,style:p?O({},z.style,{"--TreeView-itemDepth":typeof i=="function"?i(v):i}):z.style,children:[e.jsx(Fo,O({as:d,classes:{root:X.content,expanded:X.expanded,selected:X.selected,focused:X.focused,disabled:X.disabled,iconContainer:X.iconContainer,label:X.label,checkbox:X.checkbox},label:_,itemId:v,onClick:V,onMouseDown:M,icon:qs,expansionIcon:Ks,displayIcon:Gs,ownerState:fe},C,{ref:pe})),j&&e.jsx(Vo,O({as:Oe},y,{children:j}))]}))})}),ue=()=>e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"30px"},children:[e.jsx(ir,{sx:{width:"1em !important",height:"1em !important"}}),e.jsx(ve,{children:"Loading..."})]}),_e={columns:[],data:[],initialState:{},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}},muiTablePaperProps:{sx:{boxShadow:"none",marginRight:"30px",marginBottom:"40px"}}},Re=({msg:t})=>e.jsx(I,{sx:{padding:"1rem 0",marginBottom:"20px"},children:e.jsx(ve,{children:t})}),No=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),zo=({dbs:t,tbl:s})=>{h.debug(t,s);const r=H(),n=A(i=>en(i,t,s));h.debug(n);const o=A(i=>tn(i,t,s));h.debug(o);const[a,c]=u.useState("");u.useEffect(()=>{n||l()},[n]);const l=()=>{Hn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(sn({dbs:t,tbl:s,cls:x}))},i=>{h.error("error",i),c(i??F.contactSupport)})},p=u.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]),g=Pe({..._e,columns:p,data:o,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),a!==""?e.jsx(u.Suspense,{children:e.jsx(No,{severity:"error",message:a,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table has no columns"}):(h.debug(o),e.jsx(Ae,{table:g})):e.jsx(ue,{})},Bo=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),Ko=({dbs:t,tbl:s})=>{h.debug(t,s);const r=H(),n=A(i=>nn(i,t,s));h.debug(n);const o=A(i=>rn(i,t,s));h.debug(o);const[a,c]=u.useState("");u.useEffect(()=>{n||l()},[n]);const l=()=>{qn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(on({dbs:t,tbl:s,idx:x}))},i=>{h.error("error",i),c(i??F.contactSupport)})},p=u.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]),g=Pe({..._e,columns:p,data:o,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),a!==""?e.jsx(u.Suspense,{children:e.jsx(Bo,{severity:"error",message:a,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table has no indexes"}):e.jsx(Ae,{table:g}):e.jsx(ue,{})},Wo=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),$o=({dbs:t,tbl:s})=>{h.debug(t,s);const r=H(),n=A(i=>an(i,t,s));h.debug(n);const o=A(i=>ln(i,t,s));h.debug(o);const[a,c]=u.useState("");u.useEffect(()=>{n||l()},[n]);const l=()=>{Xn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(cn({dbs:t,tbl:s,trg:x}))},i=>{h.error("error",i),c(i??F.contactSupport)})},p=u.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:i})=>e.jsx("pre",{style:{padding:0,margin:0},children:i.getValue()})}],[]),g=Pe({..._e,columns:p,data:o,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),a!==""?e.jsx(u.Suspense,{children:e.jsx(Wo,{severity:"error",message:a,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table has no triggers"}):e.jsx(Ae,{table:g}):e.jsx(ue,{})},Go=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),Uo=({dbs:t,tbl:s})=>{h.debug(t,s);const r=H(),n=A(i=>dn(i,t,s));h.debug(n);const o=A(i=>un(i,t,s));h.debug(o);const[a,c]=u.useState("");u.useEffect(()=>{n||l()},[n]);const l=()=>{Jn(t,s,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(pn({dbs:t,tbl:s,frk:x}))},i=>{h.error("error",i),c(i)})},p=u.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]),g=Pe({..._e,columns:p,data:o,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),a!==""?e.jsx(u.Suspense,{children:e.jsx(Go,{severity:"error",message:a,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Table contains no foreign keys"}):e.jsx(Ae,{table:g}):e.jsx(ue,{})};var $=(t=>(t[t.TABLE=0]="TABLE",t[t.VIEW=1]="VIEW",t))($||{});const Os=u.memo(({dbs:t,tbl:s,typ:r})=>(h.debug(t,s,r),e.jsxs(Ze,{"aria-label":"Columns and indexes",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0"},children:[e.jsx(Z,{itemId:"columns",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(ar,{}),e.jsx("span",{children:"Columns"})]}),sx:{padding:0,minWidth:0},children:e.jsx(zo,{dbs:t,tbl:s})}),r===$.TABLE&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{itemId:"indexes",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(lr,{}),e.jsx("span",{children:"Indexes"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ko,{dbs:t,tbl:s})}),e.jsx(Z,{itemId:"foreignkeys",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(vr,{}),e.jsx("span",{children:"Foreign Keys"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Uo,{dbs:t,tbl:s})}),e.jsx(Z,{itemId:"triggers",label:e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(ds,{}),e.jsx("span",{children:"Triggers"})]}),sx:{padding:0,minWidth:0},children:e.jsx($o,{dbs:t,tbl:s})})]})]})));var xe=(t=>(t[t.MANAGE=0]="MANAGE",t[t.EXPLORE=1]="EXPLORE",t))(xe||{});const Ho=t=>{const s=A(r=>mn(r,t));return h.debug("tablesSelected",s),s},qo=t=>{const s=A(r=>xn(r,t));return h.debug("viewsSelected",s),s},Ds=u.memo(({dbs:t,tbl:s,typ:r})=>{var l,p;h.debug(t,s,r);const n=H(),o=Ho(t),a=qo(t),c=cr("(max-width:900px)");return e.jsxs(I,{color:"primary",sx:{display:"grid",gridTemplateColumns:"calc(100% - 110px) auto",justifyContent:"space-between",alignItems:"center",gridGap:"20px","&:hover":{".pp-row-actions":{visibility:c?"hidden":"visible"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"0",overflow:"hidden"},children:[e.jsx(I,{sx:{display:"grid",alignItems:"center"},children:e.jsx(le,{checked:a.includes(s)||o.includes(s),onClick:g=>{r===$.VIEW?n(gn({dbs:t,vws:s,isSelected:!a.includes(s)})):n(hn({dbs:t,tbl:s,isSelected:!o.includes(s)})),g.stopPropagation()}})}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"stretch"},children:[e.jsx(I,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:s}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center",visibility:"hidden"},className:"pp-row-actions",children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Manage table `"+s+"`",placement:"bottom",children:e.jsx(ye,{underline:"none",onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:xe.MANAGE})),g.preventDefault(),g.stopPropagation()},children:"Manage"})}),e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Explore table `"+s+"`",placement:"bottom",children:e.jsx(ye,{underline:"none",onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:xe.EXPLORE})),g.preventDefault(),g.stopPropagation()},children:"Explore"})})]})]})]}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-evenly",alignItems:"center",paddingRight:"16px"},children:[e.jsx(je,{title:"Manage table `"+s+"`",placement:"bottom",children:e.jsx(de,{sx:{color:(l=ne)==null?void 0:l.palette.primary.main},onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:xe.MANAGE})),g.preventDefault(),g.stopPropagation()},children:e.jsx(dr,{})})}),e.jsx(je,{title:"Explore table `"+s+"`",placement:"bottom",children:e.jsx(de,{sx:{color:(p=ne)==null?void 0:p.palette.primary.main},onClick:g=>{n(et({dbs:t,tbl:s,typ:r,explorerAction:xe.EXPLORE})),g.preventDefault(),g.stopPropagation()},children:e.jsx(ur,{})})})]})]})}),Xo=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),Jo=u.memo(({dbs:t,search:s})=>{const r=H();h.debug(t,s);const n=A(l=>fn(l,t));h.debug(n);const o=A(l=>bn(l,t));h.debug(o);const[a,c]=u.useState("");return u.useEffect(()=>{n||Yn(t,function(l){const p=l==null?void 0:l.data;h.debug("response data",p),r(jn({dbs:t,tbl:p}))},l=>{h.error("error",l),c(l??F.contactSupport)})},[n]),a!==""?e.jsx(u.Suspense,{children:e.jsx(Xo,{severity:"error",message:a,close:!1})}):n?n&&o.length===0?e.jsx(I,{sx:{padding:"1rem"},children:e.jsx(ve,{children:"Database contains no tables"})}):e.jsxs(Ze,{"aria-label":"Tables",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0",overflow:"hidden"},children:[...o.map(l=>{const p=!He(l,s);return e.jsx(Z,{itemId:l,label:e.jsx(Ds,{dbs:t,tbl:l,typ:$.TABLE}),sx:{visibility:p?"hidden":"inherit",position:p?"fixed !important":"inherit"},children:e.jsx(Os,{dbs:t,tbl:l,typ:$.TABLE})})})]}):e.jsx(ue,{})}),Yo=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),Qo=({dbs:t,search:s})=>{const r=H();h.debug(t,s);const n=A(p=>In(p,t));h.debug(n);const[o,a]=u.useState("");u.useEffect(()=>{n||l()},[n]);const c=A(p=>yn(p,t));h.debug(c);const l=()=>{Qn(t,p=>{const g=p==null?void 0:p.data;h.debug("response data",g),r(Tn({dbs:t,vws:g}))},p=>{h.error("error",p),a(p??F.contactSupport)})};return o!==""?e.jsx(u.Suspense,{children:e.jsx(Yo,{severity:"error",message:o,close:!1})}):n?n&&c.length===0?e.jsx(I,{sx:{padding:"1rem"},children:e.jsx(ve,{children:"Database contains no views"})}):e.jsxs(Ze,{"aria-label":"Views",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0",overflow:"hidden"},children:[...c.map(p=>{const g=!He(p,s);return e.jsx(Z,{itemId:p,label:e.jsx(Ds,{dbs:t,tbl:p,typ:$.VIEW}),sx:{visibility:g?"hidden":"unset",position:g?"fixed !important":"inherit"},children:e.jsx(Os,{dbs:t,tbl:p,typ:$.TABLE})})})]}):e.jsx(ue,{})},Zo=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),ei=({dbs:t,search:s})=>{h.debug(t,s);const r=H(),n=A(i=>Sn(i,t));h.debug(n);const o=A(i=>Cn(i,t));h.debug(o);const[a,c]=u.useState("");u.useEffect(()=>{n||l()},[n]);const l=()=>{Zn(t,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(vn({dbs:t,prc:x}))},i=>{h.error("error",i),c(i??F.contactSupport)})},p=u.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:i})=>e.jsx("pre",{style:{padding:0,margin:0},children:i.getValue()})}],[]),g=Pe({..._e,columns:p,data:o.filter(i=>He(i.routine_name,s)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),a!==""?e.jsx(u.Suspense,{children:e.jsx(Zo,{severity:"error",message:a,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Database contains no stored procedures"}):e.jsx(Ae,{table:g}):e.jsx(ue,{})},ti=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),si=({dbs:t,search:s})=>{h.debug(t,s);const r=H(),n=A(i=>wn(i,t));h.debug(n);const o=A(i=>En(i,t));h.debug(o);const[a,c]=u.useState("");u.useEffect(()=>{n||l()},[n]);const l=()=>{er(t,i=>{const x=i==null?void 0:i.data;h.debug("response data",x),r(kn({dbs:t,fnc:x}))},i=>{h.error("error",i),c(i??F.contactSupport)})},p=u.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:i})=>e.jsx("pre",{style:{padding:0,margin:0},children:i.getValue()})}],[]),g=Pe({..._e,columns:p,data:o.filter(i=>He(i.routine_name,s)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return h.debug(g),a!==""?e.jsx(u.Suspense,{children:e.jsx(ti,{severity:"error",message:a,close:!1})}):n?n&&o.length===0?e.jsx(Re,{msg:"Database contains no functions"}):e.jsx(Ae,{table:g}):e.jsx(ue,{})};var U=(t=>(t.WP="wp",t.LOCAL="local",t.REMOTE="remote",t.SYSTEM="system",t))(U||{});const ni=({setShowFilter:t})=>{const s=H(),r=A(o=>Ht(o));h.debug(r);const n=A(o=>_t(o));return h.debug(n),u.useEffect(()=>{localStorage.setItem("ppExplorerSearchDbsTypes",JSON.stringify(r))},[r]),e.jsxs(Mt,{sx:{position:"absolute",top:"4em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[e.jsx(Br,{title:"Database filter",sx:{textAlign:"center"}}),e.jsx(Pt,{sx:{textAlign:"center",padding:"0 1em 1em 0"},children:e.jsxs(I,{sx:{display:"inline-grid",textAlign:"left","& label":{display:"flex",alignItems:"center"}},children:[e.jsx(q,{children:e.jsxs(Q,{children:[e.jsx(le,{checked:r.includes(U.WP),onChange:(o,a)=>{s(a?tt({dbsType:U.WP}):st({dbsType:U.WP}))}}),"WordPress database"]})}),e.jsx(q,{children:e.jsxs(Q,{children:[e.jsx(le,{checked:r.includes(U.LOCAL),onChange:(o,a)=>{s(a?tt({dbsType:U.LOCAL}):st({dbsType:U.LOCAL}))}}),"Local databases"]})}),e.jsx(q,{children:e.jsxs(Q,{children:[e.jsx(le,{checked:r.includes(U.REMOTE),onChange:(o,a)=>{s(a?tt({dbsType:U.REMOTE}):st({dbsType:U.REMOTE}))}}),"Remote databases"]})}),e.jsx(q,{children:e.jsxs(Q,{children:[e.jsx(le,{checked:r.includes(U.SYSTEM),onChange:(o,a)=>{s(a?tt({dbsType:U.SYSTEM}):st({dbsType:U.SYSTEM}))}}),"System databases"]})})]})}),e.jsxs(Wr,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(I,{}),e.jsx(G,{variant:"contained",onClick:()=>t(!1),children:"OK"})]})]})},Ne=({search:t,setSearch:s,addFilter:r})=>{h.debug(t,r);const[n,o]=u.useState(!1);return e.jsxs(I,{sx:{position:"relative",marginRight:r?0:"20px"},children:[e.jsx(re,{value:t,type:"search",onChange:a=>{s(a.target.value)},onClick:a=>{a.stopPropagation()},onKeyDown:a=>{a.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:e.jsx(Wt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(pr,{})}),endAdornment:e.jsx(e.Fragment,{children:r&&e.jsx(Wt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(de,{onClick:()=>{o(!n)},children:e.jsx(mr,{})})})})}}),n&&e.jsx(ni,{setShowFilter:o})]})},ri=(t,s)=>{const r=A(n=>Mn(n,t,s));return h.debug("allTablesSelected",r),r},oi=(t,s)=>{const r=A(n=>Pn(n,t,s));return h.debug("allViewsSelected",r),r},ze=t=>{const[s,r]=u.useState(localStorage.getItem(t)??""),n=o=>{r(o),localStorage.setItem(t,o)};return h.debug(s),{search:s,setSearch:n}},ii=u.memo(({dbs:t})=>{h.debug(t);const s=H(),[r,n]=u.useState(!1),{search:o,setSearch:a}=ze(`ppExplorerSearchTables-${t}`);h.debug(r,o);const[c,l]=u.useState(!1),{search:p,setSearch:g}=ze(`ppExplorerSearchViews-${t}`);h.debug(c,p);const[i,x]=u.useState(!1),{search:j,setSearch:f}=ze(`ppExplorerSearchProcedures-${t}`);h.debug(i,j);const[b,m]=u.useState(!1),{search:d,setSearch:C}=ze(`ppExplorerSearchFunctions-${t}`);h.debug(b,d);const v=ri(t,o),k=oi(t,p),[_,V]=u.useState("");return h.debug(_),e.jsxs(Ze,{className:"pp-data-exporer-table-tree","aria-label":"Databases",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gap:"0"},children:[e.jsx(Z,{itemId:"tables",className:"pp-data-exporer-table-tree-item "+_,onClickCapture:M=>{var N,D;!(M.target instanceof HTMLInputElement)&&!(M.target instanceof HTMLAnchorElement)&&!((N=M.target.closest("span"))!=null&&N.classList.contains("pp-select-all-tables"))&&((D=M.target.closest("li"))!=null&&D.classList.contains("pp-data-exporer-table-tree-item"))&&(V(_===""?"hide-details":""),r?M.stopPropagation():(n(!0),V("")))},sx:{padding:0,minWidth:0,"&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[r&&_===""?e.jsx(le,{className:"pp-select-all-tables",checked:v,onClick:M=>{s(qt({dbs:t,isSelected:!v,search:o})),M.stopPropagation()},sx:{marginLeft:"-13px"}}):e.jsx(us,{}),"Tables"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(Ke({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:r&&_===""&&e.jsx(Ne,{search:o,setSearch:a})})]}),children:e.jsx(Jo,{dbs:t,search:o})}),e.jsx(Z,{itemId:"view",onClick:()=>{l(!c)},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[c?e.jsx(le,{checked:k,onClick:M=>{s(Xt({dbs:t,isSelected:!k,search:p})),M.stopPropagation()},sx:{marginLeft:"-13px"}}):e.jsx(ps,{}),"Views"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(dt({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:c&&e.jsx(Ne,{search:p,setSearch:g})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Qo,{dbs:t,search:p})}),e.jsx(Z,{itemId:"procedures",onClick:()=>{x(!i)},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ds,{}),"Stored Procedures"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(An({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:i&&e.jsx(Ne,{search:j,setSearch:f})})]}),sx:{padding:0,minWidth:0},children:e.jsx(ei,{dbs:t,search:j})}),e.jsx(Z,{itemId:"functions",onClick:()=>{m(!b)},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(wr,{}),"Functions"]}),e.jsxs(I,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(I,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:M=>{s(_n({dbs:t})),M.preventDefault(),M.stopPropagation()},children:"Refresh"})]})]}),e.jsx(I,{children:b&&e.jsx(Ne,{search:d,setSearch:C})})]}),sx:{padding:0,minWidth:0},children:e.jsx(si,{dbs:t,search:d})})]})}),ai=()=>{const t=A(s=>Rn(s));return h.debug("countSelectedTables",t),t},li=()=>{const t=A(s=>Ln(s));return h.debug("hasBulkActions",t),t},ci=()=>{const t=A(s=>On(s));return h.debug("countSelectedViews",t),t};function di(t){const s=u.useRef(null);return e.jsx(Pr,{nodeRef:s,handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:e.jsx(kt,{ref:s,...t})})}const At=t=>{const{title:s,message:r,open:n,setOpen:o,onConfirm:a}=t;return e.jsxs(Fr,{open:n,onClose:()=>o(!1),PaperComponent:di,"aria-labelledby":"confirm-dialog",children:[e.jsx(kr,{style:{marginTop:"10px",cursor:"move"},id:"draggable-dialog-title",children:s}),e.jsx(Vr,{children:e.jsx(Mr,{component:"div",children:r})}),e.jsx(Nr,{sx:{marginRight:"15px",marginBottom:"15px"},children:e.jsx(G,{variant:"contained",onClick:()=>{o(!1),a!==void 0&&a()},children:"OK"})})]})},Fs=()=>{const t=A(s=>Dn(s));return h.debug("context",t),t},ui=(t,s,r,n,o,a=!1)=>{h.debug(t,s,r),Xe(Me.appUrlActionRename,{dbs:t,from_tbl:s,to_tbl:r},n,o,a)},pi=(t,s,r,n,o,a,c,l=!1)=>{h.debug(t,s,r,n,o),Xe(Me.appUrlActionCopy,{from_dbs:t,to_dbs:s,from_tbl:r,to_tbl:n,copy_data:o},a,c,l)},Vs=(t,s,r,n,o=!1)=>{h.debug(t,s),Xe(Me.appUrlActionTruncate,{dbs:t,tbl:s},r,n,o)},Ns=(t,s,r,n,o,a=!1)=>{h.debug(t,s,r),Xe(Me.appUrlActionDrop,{dbs:t,tbl:s,typ:r},n,o,a)},mi=(t,s,r,n,o=!1)=>{h.debug(t);const a=new FormData;a.append("dbs",t),Object.keys(s).map(c=>{a.append("file"+c,s[c])}),Xe(Me.appUrlActionImport,a,r,n,o)},Fe={export:"Export table(s)",truncate:"Truncate table(s)",drop:"Drop table(s)/view(s)"},xi=()=>{const t=H(),s=li(),r=ai(),n=ci(),o=Fs(),[a,c]=u.useState({}),[l,p]=u.useState("*"),[g,i]=u.useState(null),[x,j]=u.useState(!1),[f,b]=u.useState(!1),[m,d]=u.useState(!1);u.useEffect(()=>{r===0&&(l==="export"||l==="truncate")&&p("*")},[r]);const C={vertical:"top",horizontal:"right"},v=()=>{const w=Jt(Et.getState()),T={};return w==null?{}:(Object.keys(w).map(S=>{w[S].tablesSelected.map(E=>{T[S]===void 0&&(T[S]={}),T[S][E]={status:null,typ:$.TABLE}}),l==="drop"&&w[S].viewsSelected.map(E=>{T[S]===void 0&&(T[S]={}),T[S][E]={status:null,typ:$.VIEW}})}),T)},k=(w,T,S)=>{const E={...a};T==="*"?Object.keys(E[w]).map(P=>E[w][P].status=S):E[w][T].status=S,c(E)},_=()=>{Object.keys(a).length>0&&Object.keys(a).map(w=>{window.document.getElementById(`pp-export-tables-${w}`).submit(),k(w,"*",!0)})},V=()=>{Object.keys(a).length>0&&Object.keys(a).map(w=>{Object.keys(a[w]).map(T=>{Vs(w,T,S=>{h.debug(S),(S==null?void 0:S.code)==="ok"&&(S==null?void 0:S.message)!==void 0?k(w,T,!0):k(w,T,!1)},S=>{h.error("error",w,T,S),k(w,T,!1)})})})},M=()=>{Object.keys(a).length>0&&Object.keys(a).map(w=>{Object.keys(a[w]).map(T=>{Ns(w,T,a[w][T].typ,S=>{h.debug(S),(S==null?void 0:S.code)==="ok"&&(S==null?void 0:S.message)!==void 0?k(w,T,!0):k(w,T,!1)},S=>{h.error("error",S),k(w,T,!1)})})})},N=w=>e.jsxs(as,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(ls,{children:e.jsxs(mt,{children:[e.jsx(Y,{children:"Database"}),e.jsx(Y,{children:"Table | View"}),e.jsx(Y,{children:"Status"})]})}),e.jsx(cs,{children:Object.keys(w).map(T=>Object.keys(w[T]).map((S,E)=>{var P,R;return e.jsxs(mt,{children:[e.jsx(Y,{children:E===0?T:null}),e.jsx(Y,{children:S}),e.jsxs(Y,{children:[w[T][S]===null&&e.jsx(gr,{style:{display:"block",margin:"0 auto"}}),w[T][S].status===!0&&e.jsx(Qt,{color:(P=ne)==null?void 0:P.palette.success.main,style:{display:"block",margin:"0 auto"}}),w[T][S].status===!1&&e.jsx(Zt,{color:(R=ne)==null?void 0:R.palette.error.main,style:{display:"block",margin:"0 auto"}})]})]},E)}))})]}),D=()=>e.jsx(I,{children:N(a)}),z=()=>{const w=v();return c(w),e.jsxs(I,{children:[N(w),(l==="truncate"||l==="drop")&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{style:{marginTop:"20px"}}),e.jsx(I,{sx:{marginTop:"20px",marginBottom:"20px"},children:l==="drop"?e.jsx("span",{children:"Deletes views and tables with all data permanently."}):e.jsx("span",{children:"Deletes all data permanently."})}),e.jsx(I,{children:e.jsx("strong",{children:"This actions cannot be undone!"})}),e.jsxs(I,{children:["'",e.jsx("strong",{children:"NO"}),"' to stop, '",e.jsx("strong",{children:"YES"}),"' to continue."]}),e.jsxs(I,{sx:{marginTop:"20px",fontSize:"80%",display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[e.jsx(xr,{}),e.jsxs("span",{children:["Does not ",l," WordPress tables"]})]})]})]})};return s?e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"pp-bulk-actions-container",color:"inherit",position:"relative",elevation:4,sx:{margin:"0 0 5px 0"},children:e.jsxs(ft,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(q,{variant:"standard",sx:{minWidth:200},children:e.jsxs(Se,{MenuProps:{id:"pp-select-menu"},value:l,onChange:w=>{p(w.target.value)},children:[e.jsx(K,{value:"*",children:"Bulk actions"}),e.jsx(K,{value:"export",disabled:r===0,children:Fe.export}),e.jsx(K,{value:"truncate",disabled:r===0,children:Fe.truncate}),e.jsx(K,{value:"drop",children:Fe.drop})]})}),e.jsx(G,{variant:"contained",onClick:()=>{l!=="*"?(i(z()),j(!0)):b(!0)},children:"Apply"})]}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsx(Nt,{badgeContent:r,color:"info",anchorOrigin:C,children:e.jsx(us,{color:"action",size:20})}),e.jsx(Nt,{badgeContent:n,color:"info",anchorOrigin:C,children:e.jsx(ps,{color:"action",size:20})})]})]})}),l==="export"&&Object.keys(a).map(w=>e.jsxs("form",{id:"pp-export-tables-"+w,action:o.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:w}),Object.keys(a[w]).map(T=>e.jsx("input",{type:"hidden",name:"table_names[]",value:T},T)),e.jsx("input",{type:"hidden",name:"_wpnonce",value:o.wp.nonce.split("-")[0]})]},"pp-export-tables-"+w)),e.jsx(At,{title:"Apply bulk action",message:"No bulk action selected",open:f,setOpen:b}),e.jsx(ge,{title:Fe[l],message:g,open:x,setOpen:j,onConfirm:()=>{switch(d(!0),l){case"export":_();break;case"truncate":V();break;case"drop":M()}}}),e.jsx(At,{title:Fe[l],message:D(),open:m,setOpen:d,onConfirm:()=>{Object.keys(a).map(w=>{t(Ke({dbs:w})),t(qt({dbs:w,isSelected:!1,search:""})),t(dt({dbs:w})),t(Xt({dbs:w,isSelected:!1,search:""}))})}})]}):null},Dt=()=>{const t=A(s=>Jt(s));return h.debug(t),t},gi=({setCanImport:t})=>{var D,z,w;const s=Fs(),r=Dt(),[n,o]=u.useState(""),[a,c]=u.useState("");u.useEffect(()=>{if(r!=null&&Object.keys(r).length>0){const T=Object.keys(r).filter(S=>r[S].dbsType===U.WP);(T==null?void 0:T.length)>0&&o(T[0])}},[r]);const l=u.useRef(null),[p,g]=u.useState(null),i=(D=s==null?void 0:s.wp)!=null&&D.zip?".sql,.zip":".sql",x=(z=s==null?void 0:s.wp)!=null&&z.zip?"SQL and ZIP":"SQL",j=(w=s==null?void 0:s.wp)==null?void 0:w.upload,[f,b]=u.useState(!1),[m,d]=u.useState(null),[C,v]=u.useState(!1),[k,_]=u.useState(""),[V,M]=u.useState(null),N=T=>e.jsx(e.Fragment,{children:e.jsxs(as,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(ls,{children:e.jsxs(mt,{children:[e.jsx(Y,{children:"Import file"}),e.jsx(Y,{children:"Message"}),e.jsx(Y,{children:"Status"})]})}),e.jsx(cs,{children:T.map(S=>Object.keys(S).map(E=>{var P,R;return e.jsxs(mt,{children:[e.jsx(Y,{sx:{verticalAlign:"text-top"},children:E}),e.jsxs(Y,{sx:{verticalAlign:"text-top"},children:[S[E].msg,S[E].errors.map(ie=>{var W;return e.jsx("ul",{style:{listStyle:"disc",padding:"0 40px"},children:e.jsx("li",{style:{color:(W=ne)==null?void 0:W.palette.error.main},children:ie})})})]}),e.jsx(Y,{sx:{verticalAlign:"text-top"},children:S[E].status==="error"?e.jsx(Zt,{color:(P=ne)==null?void 0:P.palette.error.main,style:{display:"block",margin:"0 auto"}}):e.jsx(Qt,{color:(R=ne)==null?void 0:R.palette.success.main,style:{display:"block",margin:"0 auto"}})})]},E)}))})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(I,{className:"pp-import-container",sx:{position:"relative","& > .tooltip":{position:"absolute",top:"10px",right:"10px",zIndex:999}},children:[e.jsx(at,{title:"Close",position:"bottom",children:e.jsx(de,{onClick:()=>{l.current&&(l.current.value=""),c(""),t(!1)},size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(es,{})})}),e.jsx(ht,{className:"pp-import-container",color:"inherit",position:"relative",elevation:4,sx:{display:"grid",alignItems:"center",margin:"0 0 5px 0"},children:e.jsxs(ft,{sx:{display:"grid",gap:"10px",alignItems:"center",height:"max-content",paddingTop:"50px",paddingBottom:"30px"},children:[e.jsx(e.Fragment,{children:e.jsxs(I,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"start",alignItems:"center",gap:"15px"},children:[e.jsx(I,{children:e.jsxs(q,{sx:{minWidth:"300px"},children:[e.jsx(xt,{variant:"outlined",children:"Select destination database"}),e.jsx(Se,{MenuProps:{id:"pp-select-menu"},label:"Select destination database",value:n,onChange:T=>{o(T.target.value)},children:r!=null&&Object.keys(r).map(T=>{const S=r[T].dbsType===U.WP?T+" (WordPress database)":T;return e.jsx(K,{value:T,children:S},T)})})]})}),e.jsx(I,{children:e.jsx("form",{children:e.jsxs(G,{component:"label",variant:"outlined",startIcon:e.jsx(hr,{}),children:["Select file(s)",e.jsx(re,{type:"file",inputProps:{accept:i,multiple:!0},onChange:T=>{const S=T.target.files;g(S);const E=Object.keys(S).map(P=>S[P].name).toString();c(E)},InputProps:{inputRef:l},sx:{display:"none"}})]})})}),a!==""&&e.jsx(e.Fragment,{children:e.jsx(I,{children:e.jsx(G,{component:"label",variant:"contained",startIcon:e.jsx(fr,{}),onClick:()=>{d(e.jsxs(I,{children:[e.jsxs(I,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["Selected file(s): ",e.jsx("strong",{children:a})]}),e.jsxs(I,{children:["Selected database: ",e.jsx("strong",{children:n})]}),e.jsxs(I,{sx:{marginTop:"20px",fontSize:"80%"},children:[e.jsx("strong",{children:"NOTE"}),"  You can work on other tasks while your import is performed in the background."]})]})),b(!0)},children:"Import file(s)"})})})]})}),a!==""&&e.jsxs(I,{sx:{marginTop:"20px",marginBottom:"10px",minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",fontWeight:"bold"},children:["Selected file(s): ",a]}),e.jsxs("fieldset",{className:"pp-fieldset",style:{marginTop:"5px",padding:"10px 30px",minWidth:0},children:[e.jsx("legend",{children:"IMPORTANT"}),e.jsxs("ul",{style:{paddingLeft:"15px",listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Supports multiple file uploads simultaneously."}),e.jsxs("li",{children:["Server supports ",x," file types."]}),e.jsxs("li",{children:["Maximum supported file size on this server is ",j,"."]}),e.jsx("li",{children:"Add a ; and a new line character at the end of every SQL statement."})]})]})]})})]}),e.jsx(ge,{title:"Import selected file(s)?",message:m,open:f,setOpen:b,onConfirm:()=>{mi(n,p,T=>{var S;if(T!=null&&T.message&&((S=T==null?void 0:T.context)!=null&&S.imported)&&Array.isArray(T.context.imported)){const E=T.context.imported;v(!0),_(T.message),M(N(E))}else L(F.contactSupport,{variant:"error"})},T=>{h.error("error",T),L(F.contactSupport,{variant:"error"})})}}),e.jsx(At,{title:k,message:V,open:C,setOpen:v,onConfirm:()=>{c(""),t(!1)}})]})};const Ut=u.lazy(()=>oe(()=>import("./Alert-1.0.10-a43fcfe4.js"),["./Alert-1.0.10-a43fcfe4.js","./main-1.0.10.js","./index.esm-1.0.10-b71290a7.js","./iconBase-1.0.10-ed1594d9.js","./AlertTitle-1.0.10-f0717848.js","./Close-1.0.10-2cc4e9e5.js","./useSlot-1.0.10-af1d07b4.js"],import.meta.url)),hi=()=>{var m;const t=H(),{search:s,setSearch:r}=ze("ppExplorerSearch"),n=Dt(),o=A(d=>Fn(d));h.debug(o);const a=A(d=>Rt(d));h.debug(a);const c=A(d=>Ht(d));h.debug(c);const[l,p]=u.useState("");u.useEffect(()=>{window.ppActionEnableImport=(d=!0)=>{f(d)},g()},[]);const g=()=>{let d=[];const C=localStorage.getItem("ppExplorerSearchDbsTypes");C!=null&&C!==""?d=JSON.parse(C):d=[U.WP,U.LOCAL,U.REMOTE],tr(v=>{const k=v==null?void 0:v.data;h.debug("response data",k);const _=[],V={};k.map(D=>{_.push({dbs:D.dbs,dbsType:D.dbs_type,pdsDbs:D.pds}),V[D.dbs]=!1}),x(V),_.sort((D,z)=>D.dbs.toLocaleLowerCase()>z.dbs.toLocaleLowerCase()?1:z.dbs.toLocaleLowerCase()>D.dbs.toLocaleLowerCase()?-1:0),h.debug(_),t(Vn({dbs:_,dbsTypes:d}));const M={};k.map(D=>{M[D.dbs]=D.dbs_type}),t(Nn({dbs:M}));const N=v.context;h.debug("context",N),t(zn({context:N}))},v=>{h.error("error",v),p(v??F.contactSupport)})},[i,x]=u.useState({}),[j,f]=u.useState(!1),b=()=>e.jsx(je,{title:"Import data or execute scripts",children:e.jsx(de,{sx:{color:"inherit"},onClick:()=>{f(!j)},children:e.jsx(br,{})})});return l!==""?e.jsx(u.Suspense,{children:e.jsx(Ut,{severity:"error",message:l,close:!1})}):e.jsxs(I,{className:"pp-sub-container-explorer",sx:{width:"100%"},children:[e.jsx(ht,{className:"pp-explorer-header",elevation:4,position:"relative",sx:{margin:"0 0 5px 0"},children:e.jsxs(ft,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"12px !important"},children:[((m=Me.appOrig)==null?void 0:m.appTarget)==="backend"?e.jsx(I,{sx:{textAlign:"right"},children:"Search & Filter"}):e.jsxs(I,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"10px"},children:[e.jsx(I,{sx:{fontSize:"18px",lineHeight:"18px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Data Explorer"}),e.jsx(I,{children:b()})]}),e.jsx(I,{children:e.jsx(Ne,{search:s,setSearch:r,addFilter:!0})})]})}),e.jsx(xi,{}),j&&e.jsx(gi,{setCanImport:f}),n==null?e.jsx(I,{sx:{padding:"30px"},children:e.jsx(Lt,{title:"Loading..."})}):e.jsxs(e.Fragment,{children:[o!==""&&e.jsx(kt,{sx:{marginBottom:"5px"},elevation:4,children:e.jsx(u.Suspense,{children:e.jsx(Ut,{severity:"error",message:o,close:!0,setClose:()=>{t(Yt({error:""}))}})})}),e.jsx(kt,{className:"pp-data-exporer",elevation:4,children:e.jsx(Ze,{className:"pp-data-exporer-database-tree","aria-label":"Data Explorer",slots:{expandIcon:ee,collapseIcon:qe},sx:{display:"grid",gridGap:"0",borderBottom:"1px solid rgba(0, 0, 0, 0.34)",borderRadius:"4px","& li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& li.MuiTreeItem-root:first-of-type li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:0,borderTopRightRadius:0}},children:Object.keys(n).map(d=>{if(c.includes(a[d])===!1||s!==""&&!He(d,s))return null;const C=a[d].toLocaleLowerCase()==="wp"?d+" (WordPress database)":d;return e.jsx(Z,{itemId:d,className:"pp-data-exporer-database-tree-item hide-details",onClickCapture:v=>{var k,_,V,M;if((k=v.target.closest("li"))!=null&&k.classList.contains("pp-data-exporer-database-tree-item"))if((_=v.target.closest("li"))!=null&&_.classList.contains("hide-details")?(V=v.target.closest("li"))==null||V.classList.remove("hide-details"):(M=v.target.closest("li"))==null||M.classList.add("hide-details"),i[d])v.stopPropagation();else{const N=i;N[d]=!0,x(N)}},sx:{padding:"0","&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[e.jsx(Cr,{}),C]}),children:e.jsx(ii,{dbs:d})},d)})})})]})]})},fi=()=>{const t=A(s=>_t(s));return h.debug(t),e.jsx(e.Fragment,{children:t!==void 0&&t.action===xe.EXPLORE&&e.jsx($r,{appId:jr(),dbs:t.dbs,tbl:t.tbl,exploring:!0})})},bi=({dbs:t,tbl:s})=>{h.debug(t,s);const[r,n]=u.useState(!1),[o,a]=u.useState(void 0),c=()=>{switch(o){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return e.jsxs(e.Fragment,{children:[e.jsxs(we,{disableGutters:!0,children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"Reset"}),e.jsx(ke,{children:e.jsxs(q,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{a(vt.TABLE),n(!0)},children:"Reset Table Builder"}),e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{a(vt.FORM),n(!0)},children:"Reset Form Builder"}),e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{a(vt.THEME),n(!0)},children:"Reset Theme"}),e.jsxs(he,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},error:!0,children:[e.jsx(ts,{}),"A reset cannot be undone!"]})]})})]}),e.jsx(ge,{title:c(),message:"Are you sure? This action cannot be undone!",open:r,setOpen:n,onConfirm:()=>{o!==void 0&&Ar(Gr.GLOBAL,o,t,s,null,null,l=>{if(l!=null&&l.code&&(l==null?void 0:l.message)!==void 0)switch(l.code){case"ok":L(l.message,{variant:"success"});break;case"info":L(l.message,{variant:"info"});break;default:L(l.message??F.contactSupport,{variant:"error"})}else h.error(l),L(F.contactSupport,{variant:"error"})},l=>{h.error("error",l),L(l??F.contactSupport,{variant:"error"})})}})]})},ji=({dbs:t,tbl:s,setIsUpdated:r})=>{h.debug(t,s);const n=H(),o=A(c=>Te(c));h.debug(o);const a=c=>{const l={...o,table_settings:{...o.table_settings,hyperlink_definition:c}};n(it({settings:l})),r(!0)};return e.jsxs(we,{disableGutters:!0,children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"Table Settings"}),e.jsx(ke,{children:e.jsxs(q,{children:[e.jsx(Q,{children:"Process hyperlink columns as"}),e.jsxs(xs,{sx:{marginTop:"10px",marginBottom:"10px"},children:[e.jsxs(Q,{className:"align-label-radio",children:[e.jsx(gt,{checked:o.table_settings.hyperlink_definition==="json",onChange:c=>{a("json"),c.stopPropagation()}}),"Preformatted JSON"]}),e.jsxs(Q,{children:[e.jsx(gt,{checked:o.table_settings.hyperlink_definition==="text",onChange:c=>{a("text"),c.stopPropagation()}}),"Plain text"]})]}),e.jsx(he,{children:"Preformatted JSON supports individual label and target settings. Plain text converts column content to a hyperlink link."})]})})]})},Ii=({dbs:t,tbl:s,setIsUpdated:r})=>{var x;h.debug(t,s);const n=H(),o=A(j=>Bn(j));h.debug(o);const a=A(j=>Te(j));h.debug(a);const[c,l]=u.useState(""),p=(j,f)=>{const b={...a,list_labels:{...a.list_labels,[j]:f}};n(it({settings:b})),r(!0)},g=(j,f)=>{const b={...a,form_labels:{...a.form_labels,[j]:f}};n(it({settings:b})),r(!0)},i=(j,f)=>{const b={...a,column_media:{...a.column_media,[j]:f}};n(it({settings:b})),r(!0)};return e.jsxs(we,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"Column Settings"}),e.jsx(ke,{children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(I,{sx:{display:"grid",gridGap:"10px",marginBottom:"20px"},children:e.jsxs(I,{children:[...(x=o==null?void 0:o.columns)==null?void 0:x.map((j,f)=>{const b=j.column_name;return e.jsxs(we,{expanded:c===b,onChange:()=>{l(c===b?"":b)},sx:{"&.MuiPaper-root.MuiPaper-elevation.Mui-expanded":{margin:0}},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:j.column_name}),e.jsxs(ke,{sx:{display:"grid",gridGap:"10px"},children:[e.jsx(re,{label:"Table label",value:a.list_labels[b],variant:"outlined",onChange:m=>{p(b,m.target.value)}}),e.jsx(re,{label:"Form label",value:a.form_labels[b],variant:"outlined",onChange:m=>{g(b,m.target.value)}}),e.jsxs(q,{children:[e.jsx(xt,{id:"media_type_label"+f,variant:"outlined",children:"Media type"}),e.jsxs(Se,{MenuProps:{id:"pp-select-menu"},labelId:"media_type_label"+f,id:"media_type"+f,label:"Media type",value:a.column_media[b]??"",variant:"outlined",onChange:m=>{i(b,m.target.value),m.stopPropagation()},children:[e.jsx(K,{value:"",children:" "},""),e.jsx(K,{value:"Attachment",children:"Attachment"},"Attachment"),e.jsx(K,{value:"Audio",children:"Audio"},"Audio"),e.jsx(K,{value:"Hyperlink",children:"Hyperlink"},"Hyperlink"),e.jsx(K,{value:"Image",children:"Image"},"Image"),e.jsx(K,{value:"ImageURL",children:"ImageURL"},"ImageURL"),e.jsx(K,{value:"Video",children:"Video"},"Video")]})]})]})]})})]})}),e.jsx(he,{children:"Default column labels and column media types"})]})})]})};var J=(t=>(t.SELECT="select",t.INSERT="insert",t.UPDATE="update",t.DELETE="delete",t))(J||{}),Be=(t=>(t.GET="GET",t.POST="POST",t))(Be||{});const ot=({restApi:t,action:s,roles:r,users:n,setRestApi:o,expanded:a,setExpanded:c})=>{h.debug(t,s,r,n,a);const l=(f,b)=>{const m=Ur(t);if(b)m.methods.push(f);else{const d=m.methods.indexOf(f);d>-1&&m.methods.splice(d,1)}h.debug(f,b,m),o(m)},p=f=>{h.debug(f),o({...t,authorization:f})},g=f=>{h.debug(f),o({...t,authorized_roles:f.map(b=>b.key)})},i=f=>{h.debug(f),o({...t,authorized_users:f.map(b=>b.key)})},x=u.useMemo(()=>r.filter(f=>t.authorized_roles.includes(f.key)),[t.authorized_roles,r]),j=u.useMemo(()=>n.filter(f=>t.authorized_users.includes(f.key)),[t.authorized_users,n]);return e.jsxs(we,{disableGutters:!0,expanded:a===s.toString(),onChange:()=>{a===s.toString()?c(""):c(s)},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),sx:{textTransform:"capitalize"},children:s}),e.jsx(ke,{children:e.jsxs(I,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(Q,{children:"Supported HTTP methods"}),e.jsxs(I,{children:[e.jsx($e,{control:e.jsx(We,{checked:t.methods.includes(Be.GET),onChange:(f,b)=>{l(Be.GET,b),f.stopPropagation()}}),label:"GET",labelPlacement:"end"}),e.jsx($e,{control:e.jsx(We,{checked:t.methods.includes(Be.POST),onChange:(f,b)=>{l(Be.POST,b),f.stopPropagation()}}),label:"POST",labelPlacement:"end"})]}),e.jsx(Q,{children:"Authorization"}),e.jsxs(q,{sx:{marginLeft:"-10px"},children:[e.jsxs(xs,{children:[e.jsxs(Q,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(gt,{checked:t.authorization===De.AUTHORIZED,onChange:f=>{p(De.AUTHORIZED),f.stopPropagation()}}),"Authorized access only"]}),e.jsxs(I,{sx:{display:"grid",gridGap:"10px",margin:"20px 10px 20px 42px"},children:[e.jsx(Kt,{multiple:!0,options:r,getOptionLabel:f=>f.value,value:x,onChange:(f,b)=>{g(b)},renderInput:f=>e.jsx(re,{...f,label:"Roles"})}),e.jsx(Kt,{multiple:!0,options:n,getOptionLabel:f=>f.value,value:j,onChange:(f,b)=>{i(b)},renderInput:f=>e.jsx(re,{...f,label:"Users"})})]}),e.jsxs(Q,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(gt,{checked:t.authorization===De.ANONYMOUS,onChange:f=>{p(De.ANONYMOUS),f.stopPropagation()}}),"Anonymous access"]})]}),t.authorization===De.ANONYMOUS&&t.methods.length>0&&e.jsxs(I,{sx:{marginTop:"10px",marginLeft:"10px"},children:[(s===J.INSERT||s===J.UPDATE||s===J.DELETE)&&e.jsx(he,{children:"This setting allows non-authorized users to modify this table"}),s===J.SELECT&&e.jsx(he,{children:"This setting allows non-authorized users to query this table"})]})]})]})})]})},yi=({dbs:t,tbl:s,typ:r,metaData:n,setIsUpdated:o})=>{var j,f,b,m;h.debug(t,s,r,n);const a=H(),c=A(d=>Te(d));h.debug(c);const l=A(d=>Rt(d));h.debug(l);const[p,g]=u.useState(""),i=[];if(((f=(j=n==null?void 0:n.settings)==null?void 0:j.wp)==null?void 0:f.roles)!==void 0)for(const d in n.settings.wp.roles)i.push({key:d,value:n.settings.wp.roles[d]});h.debug(i);const x=[];if(((m=(b=n==null?void 0:n.settings)==null?void 0:b.wp)==null?void 0:m.users)!==void 0)for(const d in n.settings.wp.users)x.push({key:d,value:n.settings.wp.users[d]});return h.debug(x),e.jsxs(we,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Ee,{expandIcon:e.jsx(ee,{}),children:"REST API"}),e.jsx(ke,{children:e.jsxs(I,{children:[e.jsx($e,{control:e.jsx(We,{checked:c.rest_api!==null,onClick:d=>{c.rest_api!==null?a(Kn({})):a(Wn({})),o(!0),d.stopPropagation()}}),label:"Enable REST API",labelPlacement:"end"}),c.rest_api!==null&&e.jsxs(I,{sx:{marginTop:"20px"},children:[e.jsx(ot,{restApi:c.rest_api.select,action:J.SELECT,roles:i,users:x,setRestApi:d=>{const C={...c.rest_api};C[J.SELECT]=d,a(nt({rest_api:C})),o(!0)},expanded:p,setExpanded:g}),e.jsx(ot,{restApi:c.rest_api.insert,action:J.INSERT,roles:i,users:x,setRestApi:d=>{const C={...c.rest_api};C[J.INSERT]=d,a(nt({rest_api:C})),o(!0)},expanded:p,setExpanded:g}),e.jsx(ot,{restApi:c.rest_api.update,action:J.UPDATE,roles:i,users:x,setRestApi:d=>{const C={...c.rest_api};C[J.UPDATE]=d,a(nt({rest_api:C})),o(!0)},expanded:p,setExpanded:g}),e.jsx(ot,{restApi:c.rest_api.delete,action:J.DELETE,roles:i,users:x,setRestApi:d=>{const C={...c.rest_api};C[J.DELETE]=d,a(nt({rest_api:C})),o(!0)},expanded:p,setExpanded:g})]}),l[t]==="system"||l[t]==="wp"&&n.settings.wp.tables.includes(s)&&e.jsxs(he,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",marginTop:"20px",alignItems:"center","& svg":{fontSize:"20px"}},children:[e.jsx(ts,{}),"We discourage enabling REST API services for WordPress and system tables"]})]})})]})},Ti=({dbs:t,tbl:s,typ:r,metaData:n})=>{var W,pe,ae,Le,me,fe,X,Oe;h.debug(t,s,r,n);const o=H(),[a,c]=u.useState("sql"),[l,p]=u.useState(!0),[g,i]=u.useState(""),[x,j]=u.useState(t),[f,b]=u.useState(""),[m,d]=u.useState(!0),[C,v]=u.useState(!1),[k,_]=u.useState(!1),[V,M]=u.useState(!1),[N,D]=u.useState(!1),z=Dt();h.debug(z);const w=u.useMemo(()=>{const y=[];for(const te in z)y.push(te);return y},[z]);h.debug(w);const T=A(y=>Rt(y));h.debug(T);const[S,E]=u.useState(z[t].pdsDbs===!0?((ae=(pe=(W=n==null?void 0:n.settings)==null?void 0:W.wp)==null?void 0:pe.connect)==null?void 0:ae.interval)??"":""),[P,R]=u.useState(z[t].pdsDbs===!0?((fe=(me=(Le=n==null?void 0:n.settings)==null?void 0:Le.wp)==null?void 0:me.connect)==null?void 0:fe.unit)??"":""),ie=y=>{Ir.post(n.settings.wp.homea+"?action=wpda_pds_update_interval",y,{headers:{"Content-Type":"multipart/form-data"}}).then(te=>{h.error(y,te)}).catch(te=>{h.error("error",te)})};return e.jsxs(e.Fragment,{children:[e.jsxs(I,{sx:{margin:0,padding:0,"& .pp-action":{display:"grid",gridTemplateColumns:"150px 1fr",alignItems:"center",margin:0,padding:"30px",borderBottom:"1px solid #ddd"},"& .pp-action button":{width:"120px"}},children:[r===$.TABLE&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsxs("form",{action:n.settings.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:t}),e.jsx("input",{type:"hidden",name:"table_names",value:s}),e.jsx("input",{type:"hidden",name:"format_type",value:a}),e.jsx("input",{type:"hidden",name:"include_table_settings",value:a==="sql"&&l?"on":"off"}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.aonce.split("-")[0]}),e.jsx(G,{variant:"contained",type:"submit",children:"Export"})]})}),e.jsxs(I,{sx:{display:"grid"},children:[e.jsxs(q,{children:[e.jsx(xt,{variant:"outlined",children:"Export to"}),e.jsxs(Se,{MenuProps:{id:"pp-select-menu"},label:"Export to",value:a,onChange:y=>{c(y.target.value)},children:[e.jsx(K,{value:"sql",children:"SQL"},"sql"),e.jsx(K,{value:"csv",children:"CSV"},"csv"),e.jsx(K,{value:"json",children:"JSON"},"json"),e.jsx(K,{value:"excel",children:"Excel"},"excel"),e.jsx(K,{value:"xml",children:"XML"},"xml")]})]}),e.jsx($e,{sx:{visibility:a==="sql"?"visible":"hidden",height:a==="sql"?"auto":0,marginTop:a==="sql"?"10px":0,marginLeft:0},control:e.jsx(We,{checked:l,onClick:y=>{p(!l),y.stopPropagation()}}),label:"With table settings",labelPlacement:"end"})]})]}),T[t]!=="system"&&(T[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx(G,{variant:"contained",onClick:()=>{s!==g&&g.trim()!==""?v(!0):L("Nothing to rename",{variant:"error"})},children:"Rename"})}),e.jsx(I,{children:e.jsx(re,{label:r===$.TABLE?"New table name":"New view name",value:g,onChange:y=>{i(y.target.value)},fullWidth:!0})})]}),r===$.TABLE&&e.jsxs(I,{className:"pp-action",children:[e.jsxs(I,{children:[e.jsx(G,{variant:"contained",onClick:()=>{f.trim()!==""?(D(!0),pi(t,x,s,f,m,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":o(Ke({dbs:t})),L(y.message,{variant:"success"});break;case"info":L(y.message,{variant:"info"});break;default:h.error(y),L(y.message??F.contactSupport,{variant:"error"})}else h.error(y),L(F.contactSupport,{variant:"error"});D(!1)},y=>{h.error("error",y),L(y??F.contactSupport,{variant:"error"}),D(!1)})):L("Nothing to rename",{variant:"error"})},children:"Copy"}),e.jsx($e,{control:e.jsx(We,{checked:m,onClick:y=>{d(!m),y.stopPropagation()}}),label:"Copy data",labelPlacement:"end",sx:{height:"56px"}}),e.jsx(I,{sx:{display:N?"block":"none","& > div":{marginRight:"30px"},"& span.MuiCircularProgress-root, svg":{height:"20px !important",width:"20px !important"}},children:e.jsx(Lt,{title:"Copying..."})})]}),e.jsxs(I,{sx:{display:"grid",gridGap:"10px"},children:[e.jsxs(q,{fullWidth:!0,children:[e.jsx(xt,{variant:"outlined",children:"To database"}),e.jsxs(Se,{MenuProps:{id:"pp-select-menu"},label:"To database",value:x,onChange:y=>{j(y.target.value)},children:[...w.map(y=>e.jsx(K,{value:y,children:y},y))]})]}),e.jsx(re,{label:"To table name",value:f,onChange:y=>{b(y.target.value)},fullWidth:!0})]})]}),r===$.TABLE&&T[t]!=="system"&&(T[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx(G,{variant:"contained",onClick:()=>{_(!0)},children:"Truncate"})}),e.jsxs(I,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx("span",{children:"Deletes all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),T[t]!=="system"&&(T[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx(G,{variant:"contained",onClick:()=>{M(!0)},children:"Drop"})}),e.jsxs(I,{sx:{display:"grid",gridGap:"5px"},children:[r==$.VIEW?e.jsx("span",{children:"Deletes view permanently."}):e.jsx("span",{children:"Deletes table and all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),r===$.TABLE&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsxs("form",{method:"POST",action:n.settings.wp.home+"?page=wpda_designer",children:[e.jsx("input",{type:"hidden",name:"action",value:"edit"}),e.jsx("input",{type:"hidden",name:"action2",value:"init"}),e.jsx("input",{type:"hidden",name:"wpda_schema_name",value:t}),e.jsx("input",{type:"hidden",name:"wpda_schema_name_re",value:t}),e.jsx("input",{type:"hidden",name:"wpda_table_name",value:s}),e.jsx("input",{type:"hidden",name:"wpda_table_name_re",value:s}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.alter}),e.jsx("input",{type:"hidden",name:"page_number",value:"1"}),e.jsx("input",{type:"hidden",name:"caller",value:"dataexplorer"}),e.jsx(G,{variant:"contained",type:"submit",children:"ALTER"})]})}),e.jsx(I,{sx:{display:"grid",gridGap:"5px"},children:"Loads table into the Data Designer."})]}),z[t].pdsDbs===!0&&((Oe=(X=n==null?void 0:n.settings)==null?void 0:X.wp)==null?void 0:Oe.connect)!==!1&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx(G,{variant:"contained",onClick:()=>{if(S!==""&&S>0&&P!==""){const y=new FormData;y.append("wpnonce",n.settings.wp.refresh),y.append("schema_name",t),y.append("table_name",s),y.append("interval",S.toString()),y.append("unit",P),ie(y)}else L("Please enter valid scheduled update values",{variant:"error"})},children:"Refresh"})}),e.jsxs(I,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx(I,{children:"Next scheduled update"}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",justifyContent:"start",alignItems:"center",gap:"5px"},children:[e.jsx(re,{type:"number",inputProps:{min:0},value:S,autoComplete:"off",onChange:y=>{const te=y.target.value.replaceAll("-","");E(te===""?"":Number(te))}}),e.jsxs(Se,{MenuProps:{id:"pp-select-menu"},value:P,onChange:y=>{R(y.target.value)},children:[e.jsx(K,{value:""}),e.jsx(K,{value:"hour",children:"hour"}),e.jsx(K,{value:"day",children:"day"})]})]}),e.jsx(q,{children:e.jsx(he,{children:"Enter and press REFRESH to apply"})})]})]}),n.create!==""&&e.jsxs(I,{className:"pp-action",children:[e.jsx(I,{children:e.jsx(Kr,{text:n.create,onCopy:()=>{L("SQL was copied to your clipboard",{variant:"info"})},children:e.jsx(je,{title:"Copy SQL to clipboard",children:e.jsx(G,{variant:"contained",endIcon:e.jsx(Hr,{}),sx:{display:"flex",alignItems:"flex-start","& svg":{width:"50%"}},children:"SQL"})})})}),e.jsx(I,{sx:{display:"grid",gridGap:"5px"},children:e.jsx(I,{sx:{whiteSpace:"pre-wrap",fontSize:"70%"},children:n.create})})]})]}),e.jsx(ge,{title:`Rename ${r===$.VIEW?"view":"table"}?`,message:"This can affect existing apps using this table!",open:C,setOpen:v,onConfirm:()=>{ui(t,s,g,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":r===$.VIEW?o(dt({dbs:t})):o(Ke({dbs:t})),o(ut({})),L(y.message,{variant:"success"});break;case"info":L(y.message,{variant:"info"});break;default:h.error(y),L(y.message??F.contactSupport,{variant:"error"})}else h.error(y),L(F.contactSupport,{variant:"error"})},y=>{h.error("error",y),L(y??F.contactSupport,{variant:"error"})})}}),e.jsx(ge,{title:"Truncate table?",message:"This action cannot be undone!",open:k,setOpen:_,onConfirm:()=>{Vs(t,s,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":L(y.message,{variant:"success"});break;case"info":L(y.message,{variant:"info"});break;default:h.error(y),L(y.message??F.contactSupport,{variant:"error"})}else h.error(y),L(F.contactSupport,{variant:"error"})},y=>{h.error("error",y),L(y??F.contactSupport,{variant:"error"})})}}),e.jsx(ge,{title:`Drop ${r===$.VIEW?"view":"table"}?`,message:"This action cannot be undone!",open:V,setOpen:M,onConfirm:()=>{Ns(t,s,r,y=>{if(h.debug(y),y!=null&&y.code&&(y==null?void 0:y.message)!==void 0)switch(y.code){case"ok":r===$.VIEW?o(dt({dbs:t})):o(Ke({dbs:t})),o(ut({})),L(y.message,{variant:"success"});break;case"info":L(y.message,{variant:"info"});break;default:h.error(y),L(y.message??F.contactSupport,{variant:"error"})}else h.error(y),L(F.contactSupport,{variant:"error"})},y=>{h.error("error",y),L(y??F.contactSupport,{variant:"error"})})}})]})},Si=({dbs:t,tbl:s,typ:r})=>{var T,S;h.debug(t,s,r);const n=H(),[o,a]=u.useState(Te(Et.getState()));h.debug(o);const[c,l]=u.useState(""),[p,g]=u.useState(!1),[i,x]=u.useState({}),[j,f]=u.useState(!1),[b,m]=u.useState(!1);u.useEffect(()=>{p||d()},[t,s]);const d=()=>{qr(t,s,!0,E=>{var R,ie;const P=E==null?void 0:E.data;if(h.debug("response data",t,s,P),(R=P==null?void 0:P.access)!=null&&R.select&&Array.isArray(P.access.select)&&P.access.select.includes("POST")){const W={...P.settings};W.list_labels={...P.table_labels},W.form_labels={...P.form_labels},W.column_media={...P.wp_media},delete W.hyperlinks,delete W.ui,delete W.wp;const pe={...P};x(pe),n($n({settings:W,metaData:pe})),g(!0)}else{let W=F.contactSupport;(ie=E==null?void 0:E.data)!=null&&ie.message&&(W=E.data.message+" - check console for more information"),h.error(W),l(W)}},E=>{h.error("error",E),l(E??F.contactSupport)})};u.useEffect(()=>{c!==""&&(n(Yt({error:c})),n(Ft({})),n(ut({})))},[c]);const C=A(E=>Te(E));h.debug(C);const v=((T=ne)==null?void 0:T.palette.mode)===Gn.LIGHT?(S=ne)==null?void 0:S.palette.primary.main:"",k=E=>{n(Un({anchor:E}))},_=()=>{n(ut({})),n(Ft({}))},V=()=>{j?m(!0):_()},M=()=>{const E={...C};let P=!1;sr(t,s,E,R=>{if(R!=null&&R.code&&(R==null?void 0:R.message)!==void 0)switch(R.code){case"ok":L(R.message,{variant:"success"});break;case"info":L(R.message,{variant:"info"});break;default:h.error(R),L(R.message??F.contactSupport,{variant:"error"}),P=!0}else h.error(R),L(F.contactSupport,{variant:"error"}),P=!0},R=>{h.error(R),L(R??F.contactSupport,{variant:"error"}),P=!0}),P||a(Te(Et.getState())),f(!1)},N=()=>{j?(M(),setTimeout(()=>{_()},1e3)):_()},[D,z]=u.useState("1"),w=(E,P)=>{z(P)};return c!==""?null:e.jsxs(e.Fragment,{children:[e.jsxs(_r,{closeDrawer:V,children:[e.jsx(ht,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(ft,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(I,{sx:{flexGrow:1},children:[e.jsx(ve,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(ve,{sx:{fontSize:"10px",display:{xs:"none",sm:"block"},paddingLeft:"10px"},children:[t," - ",s]})]}),e.jsx(at,{title:"Dock to left",position:"bottom",children:e.jsx(de,{onClick:()=>{k(Vt.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Rr,{})})}),e.jsx(at,{title:"Dock to right",position:"bottom",children:e.jsx(de,{onClick:()=>{k(Vt.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Lr,{})})}),e.jsx(at,{title:"Close",position:"bottom",children:e.jsx(de,{onClick:V,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(es,{})})})]})}),e.jsx(Mt,{className:"pp-settings-container",children:e.jsx(Pt,{sx:{padding:0,margin:0},children:p?e.jsxs(Or,{value:D,children:[e.jsxs(Dr,{variant:"fullWidth",textColor:"primary",onChange:w,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx($t,{label:"Actions",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx($t,{label:"Settings",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(I,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(zt,{value:"1",children:e.jsx(Ti,{dbs:t,tbl:s,typ:r,metaData:i})}),e.jsxs(zt,{value:"2",children:[e.jsx(ji,{dbs:t,tbl:s,setIsUpdated:f}),e.jsx(Ii,{dbs:t,tbl:s,setIsUpdated:f}),e.jsx(yi,{dbs:t,tbl:s,typ:r,metaData:i,setIsUpdated:f}),e.jsx(bi,{dbs:t,tbl:s})]})]})]}):e.jsx(I,{sx:{padding:"30px"},children:e.jsx(Lt,{title:"Loading data..."})})})}),e.jsx(Mt,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:v},children:e.jsxs(Pt,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(G,{variant:"outlined",className:"footer_action_button_apply",onClick:M,children:"Apply"}),e.jsx(G,{variant:"outlined",className:"footer_action_button",onClick:N,children:"OK"}),e.jsx(G,{variant:"outlined",className:"footer_action_button",onClick:V,children:"Cancel"})]})})]}),e.jsx(ge,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:b,setOpen:m,onConfirm:()=>{_()}})]})},Ci=()=>{const t=A(s=>_t(s));return h.debug(t),e.jsx(e.Fragment,{children:t!==void 0&&t.action===xe.MANAGE&&e.jsx(Si,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},ca=()=>{const t=zr();return e.jsx(yr,{theme:t,children:e.jsxs(I,{sx:{"& > :nth-of-type(2)":{visibility:"hidden",position:"fixed"}},children:[e.jsx(fi,{}),e.jsx(hi,{}),e.jsx(Ci,{})]})})};export{ca as default};
